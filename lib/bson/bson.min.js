var BSON=function(exports){"use strict";var global=window,lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(b64){var l,tmp,placeHolders,arr;inited||init();var len=b64.length;if(0<len%4)throw new Error("Invalid string. Length must be a multiple of 4");placeHolders="="===b64[len-2]?2:"="===b64[len-1]?1:0,arr=new Arr(3*len/4-placeHolders),l=0<placeHolders?len-4:len;for(var L=0,i=0;i<l;i+=4,0)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[L++]=tmp>>16&255,arr[L++]=tmp>>8&255,arr[L++]=255&tmp;return 2==placeHolders?(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[L++]=255&tmp):1==placeHolders&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[L++]=tmp>>8&255,arr[L++]=255&tmp),arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]}function encodeChunk(uint8,start,end){for(var tmp,output=[],i=start;i<end;i+=3)tmp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2],output.push(tripletToBase64(tmp));return output.join("")}function fromByteArray(uint8){var tmp;inited||init();for(var len=uint8.length,extraBytes=len%3,output="",parts=[],i=0,len2=len-extraBytes;i<len2;i+=16383)parts.push(encodeChunk(uint8,i,len2<i+16383?len2:i+16383));return 1==extraBytes?(tmp=uint8[len-1],output+=lookup[tmp>>2],output+=lookup[tmp<<4&63],output+="=="):2==extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],output+=lookup[tmp>>10],output+=lookup[tmp>>4&63],output+=lookup[tmp<<2&63],output+="="),parts.push(output),parts.join("")}function read(buffer,offset,s,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=s?nBytes-1:0,d=s?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;0<nBits;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;0<nBits;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)}function write(buffer,value,offset,c,mLen,s){var e,m,eLen=8*s-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=c?0:s-1,d=c?1:-1,s=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),2<=(value+=1<=e+eBias?rt/c:rt*Math.pow(2,1-eBias))*c&&(e++,c/=2),eMax<=e+eBias?(m=0,e=eMax):1<=e+eBias?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));8<=mLen;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;0<eLen;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}var toString={}.toString,isArray=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)},INSPECT_MAX_BYTES=50;Buffer$1.TYPED_ARRAY_SUPPORT=void 0===global.TYPED_ARRAY_SUPPORT||global.TYPED_ARRAY_SUPPORT;var _kMaxLength=kMaxLength();function kMaxLength(){return Buffer$1.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(that,length){if(kMaxLength()<length)throw new RangeError("Invalid typed array length");return Buffer$1.TYPED_ARRAY_SUPPORT?(that=new Uint8Array(length)).__proto__=Buffer$1.prototype:(null===that&&(that=new Buffer$1(length)),that.length=length),that}function Buffer$1(arg,encodingOrOffset,length){if(!(Buffer$1.TYPED_ARRAY_SUPPORT||this instanceof Buffer$1))return new Buffer$1(arg,encodingOrOffset,length);if("number"!=typeof arg)return from(this,arg,encodingOrOffset,length);if("string"==typeof encodingOrOffset)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,arg)}function from(that,value,encodingOrOffset,length){if("number"==typeof value)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&value instanceof ArrayBuffer?fromArrayBuffer(that,value,encodingOrOffset,length):"string"==typeof value?fromString(that,value,encodingOrOffset):fromObject(that,value)}function assertSize(size){if("number"!=typeof size)throw new TypeError('"size" argument must be a number');if(size<0)throw new RangeError('"size" argument must not be negative')}function alloc(that,size,fill,encoding){return assertSize(size),!(size<=0)&&void 0!==fill?"string"==typeof encoding?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill):createBuffer(that,size)}function allocUnsafe(that,size){if(assertSize(size),that=createBuffer(that,size<0?0:0|checked(size)),!Buffer$1.TYPED_ARRAY_SUPPORT)for(var i=0;i<size;++i)that[i]=0;return that}function fromString(that,string,actual){if("string"==typeof actual&&""!==actual||(actual="utf8"),!Buffer$1.isEncoding(actual))throw new TypeError('"encoding" must be a valid string encoding');var length=0|byteLength(string,actual),actual=(that=createBuffer(that,length)).write(string,actual);return actual!==length&&(that=that.slice(0,actual)),that}function fromArrayLike(that,array){var length=array.length<0?0:0|checked(array.length);that=createBuffer(that,length);for(var i=0;i<length;i+=1)that[i]=255&array[i];return that}function fromArrayBuffer(that,array,byteOffset,length){if(array.byteLength,byteOffset<0||array.byteLength<byteOffset)throw new RangeError("'offset' is out of bounds");if(array.byteLength<byteOffset+(length||0))throw new RangeError("'length' is out of bounds");return array=void 0===byteOffset&&void 0===length?new Uint8Array(array):void 0===length?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length),Buffer$1.TYPED_ARRAY_SUPPORT?(that=array).__proto__=Buffer$1.prototype:that=fromArrayLike(that,array),that}function fromObject(that,obj){if(internalIsBuffer(obj)){var len=0|checked(obj.length);return 0===(that=createBuffer(that,len)).length?that:(obj.copy(that,0,0,len),that)}if(obj){if("undefined"!=typeof ArrayBuffer&&obj.buffer instanceof ArrayBuffer||"length"in obj)return"number"!=typeof obj.length||isnan(obj.length)?createBuffer(that,0):fromArrayLike(that,obj);if("Buffer"===obj.type&&isArray(obj.data))return fromArrayLike(that,obj.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(length){if(length>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|length}function SlowBuffer(length){return+length!=length&&(length=0),Buffer$1.alloc(+length)}function internalIsBuffer(b){return null!=b&&b._isBuffer}function byteLength(string,encoding){if(internalIsBuffer(string))return string.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer))return string.byteLength;"string"!=typeof string&&(string=""+string);var len=string.length;if(0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case void 0:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function slowToString(encoding,start,end){var loweredCase=!1;if((void 0===start||start<0)&&(start=0),start>this.length)return"";if((void 0===end||end>this.length)&&(end=this.length),end<=0)return"";if((end>>>=0)<=(start>>>=0))return"";for(encoding=encoding||"utf8";;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0===buffer.length)return-1;if("string"==typeof byteOffset?(encoding=byteOffset,byteOffset=0):2147483647<byteOffset?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),byteOffset=+byteOffset,isNaN(byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0){if(!dir)return-1;byteOffset=0}if("string"==typeof val&&(val=Buffer$1.from(val,encoding)),internalIsBuffer(val))return 0===val.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if("number"==typeof val)return val&=255,Buffer$1.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(dir?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1,arrLength=arr.length,valLength=val.length;if(void 0!==encoding&&("ucs2"===(encoding=String(encoding).toLowerCase())||"ucs-2"===encoding||"utf16le"===encoding||"utf-16le"===encoding)){if(arr.length<2||val.length<2)return-1;arrLength/=indexSize=2,valLength/=2,byteOffset/=2}function read$$1(buf,i){return 1===indexSize?buf[i]:buf.readUInt16BE(i*indexSize)}if(dir)for(var foundIndex=-1,i=byteOffset;i<arrLength;i++)if(read$$1(arr,i)===read$$1(val,-1===foundIndex?0:i-foundIndex)){if(-1===foundIndex&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else-1!==foundIndex&&(i-=i-foundIndex),foundIndex=-1;else for(arrLength<byteOffset+valLength&&(byteOffset=arrLength-valLength),i=byteOffset;0<=i;i--){for(var found=!0,j=0;j<valLength;j++)if(read$$1(arr,i+j)!==read$$1(val,j)){found=!1;break}if(found)return i}return-1}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var strLen=buf.length-offset;(!length||strLen<(length=Number(length)))&&(length=strLen);strLen=string.length;if(strLen%2!=0)throw new TypeError("Invalid hex string");strLen/2<length&&(length=strLen/2);for(var i=0;i<length;++i){var parsed=parseInt(string.substr(2*i,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?fromByteArray(buf):fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var secondByte,thirdByte,fourthByte,tempCodePoint,firstByte=buf[i],codePoint=null,bytesPerSequence=239<firstByte?4:223<firstByte?3:191<firstByte?2:1;if(i+bytesPerSequence<=end)switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:128==(192&(secondByte=buf[i+1]))&&127<(tempCodePoint=(31&firstByte)<<6|63&secondByte)&&(codePoint=tempCodePoint);break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128==(192&secondByte)&&128==(192&thirdByte)&&2047<(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte)&&(tempCodePoint<55296||57343<tempCodePoint)&&(codePoint=tempCodePoint);break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128==(192&secondByte)&&128==(192&thirdByte)&&128==(192&fourthByte)&&65535<(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte)&&tempCodePoint<1114112&&(codePoint=tempCodePoint)}null===codePoint?(codePoint=65533,bytesPerSequence=1):65535<codePoint&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return decodeCodePointsArray(res)}Buffer$1.poolSize=8192,Buffer$1._augment=function(arr){return arr.__proto__=Buffer$1.prototype,arr},Buffer$1.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)},Buffer$1.TYPED_ARRAY_SUPPORT&&(Buffer$1.prototype.__proto__=Uint8Array.prototype,Buffer$1.__proto__=Uint8Array),Buffer$1.alloc=function(size,fill,encoding){return alloc(null,size,fill,encoding)},Buffer$1.allocUnsafe=function(size){return allocUnsafe(null,size)},Buffer$1.allocUnsafeSlow=function(size){return allocUnsafe(null,size)},Buffer$1.isBuffer=isBuffer,Buffer$1.compare=function(a,b){if(!internalIsBuffer(a)||!internalIsBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer$1.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer$1.concat=function(list,length){if(!isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(0===list.length)return Buffer$1.alloc(0);if(void 0===length)for(i=length=0;i<list.length;++i)length+=list[i].length;for(var buffer=Buffer$1.allocUnsafe(length),pos=0,i=0;i<list.length;++i){var buf=list[i];if(!internalIsBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos),pos+=buf.length}return buffer},Buffer$1.byteLength=byteLength,Buffer$1.prototype._isBuffer=!0,Buffer$1.prototype.swap16=function(){var len=this.length;if(len%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer$1.prototype.swap32=function(){var len=this.length;if(len%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer$1.prototype.swap64=function(){var len=this.length;if(len%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer$1.prototype.toString=function(){var length=0|this.length;return 0==length?"":0===arguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer$1.prototype.equals=function(b){if(!internalIsBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Buffer$1.compare(this,b)},Buffer$1.prototype.inspect=function(){var str="",max=INSPECT_MAX_BYTES;return 0<this.length&&(str=this.toString("hex",0,max).match(/.{2}/g).join(" "),this.length>max&&(str+=" ... ")),"<Buffer "+str+">"},Buffer$1.prototype.compare=function(target,start,end,thisStart,thisEnd){if(!internalIsBuffer(target))throw new TypeError("Argument must be a Buffer");if(void 0===start&&(start=0),void 0===end&&(end=target?target.length:0),void 0===thisStart&&(thisStart=0),void 0===thisEnd&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisEnd<=thisStart&&end<=start)return 0;if(thisEnd<=thisStart)return-1;if(end<=start)return 1;if(this===target)return 0;for(var x=(thisEnd>>>=0)-(thisStart>>>=0),y=(end>>>=0)-(start>>>=0),len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end),i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer$1.prototype.includes=function(val,byteOffset,encoding){return-1!==this.indexOf(val,byteOffset,encoding)},Buffer$1.prototype.indexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer$1.prototype.lastIndexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer$1.prototype.write=function(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else{if(!isFinite(offset))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");offset|=0,isFinite(length)?(length|=0,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0)}var remaining=this.length-offset;if((void 0===length||remaining<length)&&(length=remaining),0<string.length&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding=encoding||"utf8";for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer$1.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,codePoints);for(var res="",i=0;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(127&buf[i]);return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||len<end)&&(end=len);for(var out="",i=start;i<end;++i)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!=0||offset<0)throw new RangeError("offset is not uint");if(length<offset+ext)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!internalIsBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(max<value||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}function objectWriteUInt16(buf,value,offset,littleEndian){value<0&&(value=65535+value+1);for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i)}function objectWriteUInt32(buf,value,offset,littleEndian){value<0&&(value=4294967295+value+1);for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,value,offset,4,34028234663852886e22,-34028234663852886e22),write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,value,offset,8,17976931348623157e292,-17976931348623157e292),write(buf,value,offset,littleEndian,52,8),offset+8}Buffer$1.prototype.slice=function(start,end){var len=this.length;if((start=~~start)<0?(start+=len)<0&&(start=0):len<start&&(start=len),(end=void 0===end?len:~~end)<0?(end+=len)<0&&(end=0):len<end&&(end=len),end<start&&(end=start),Buffer$1.TYPED_ARRAY_SUPPORT)(newBuf=this.subarray(start,end)).__proto__=Buffer$1.prototype;else for(var sliceLen=end-start,newBuf=new Buffer$1(sliceLen,void 0),i=0;i<sliceLen;++i)newBuf[i]=this[i+start];return newBuf},Buffer$1.prototype.readUIntLE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer$1.prototype.readUIntBE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;0<byteLength&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer$1.prototype.readUInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer$1.prototype.readUInt16LE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer$1.prototype.readUInt16BE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer$1.prototype.readUInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer$1.prototype.readUInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer$1.prototype.readIntLE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return(mul*=128)<=val&&(val-=Math.pow(2,8*byteLength)),val},Buffer$1.prototype.readIntBE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];0<i&&(mul*=256);)val+=this[offset+--i]*mul;return(mul*=128)<=val&&(val-=Math.pow(2,8*byteLength)),val},Buffer$1.prototype.readInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer$1.prototype.readInt16LE=function(val,noAssert){noAssert||checkOffset(val,2,this.length);val=this[val]|this[val+1]<<8;return 32768&val?4294901760|val:val},Buffer$1.prototype.readInt16BE=function(val,noAssert){noAssert||checkOffset(val,2,this.length);val=this[val+1]|this[val]<<8;return 32768&val?4294901760|val:val},Buffer$1.prototype.readInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer$1.prototype.readInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer$1.prototype.readFloatLE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),read(this,offset,!0,23,4)},Buffer$1.prototype.readFloatBE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),read(this,offset,!1,23,4)},Buffer$1.prototype.readDoubleLE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),read(this,offset,!0,52,8)},Buffer$1.prototype.readDoubleBE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),read(this,offset,!1,52,8)},Buffer$1.prototype.writeUIntLE=function(value,offset,byteLength,noAssert){value=+value,offset|=0,byteLength|=0,noAssert||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer$1.prototype.writeUIntBE=function(value,offset,byteLength,noAssert){value=+value,offset|=0,byteLength|=0,noAssert||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var i=byteLength-1,mul=1;for(this[offset+i]=255&value;0<=--i&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer$1.prototype.writeUInt8=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,255,0),Buffer$1.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),this[offset]=255&value,offset+1},Buffer$1.prototype.writeUInt16LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer$1.prototype.writeUInt16BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer$1.prototype.writeUInt32LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer$1.prototype.writeUInt32BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer$1.prototype.writeIntLE=function(value,offset,byteLength,limit){value=+value,offset|=0,limit||checkInt(this,value,offset,byteLength,(limit=Math.pow(2,8*byteLength-1))-1,-limit);var i=0,mul=1,sub=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i-1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer$1.prototype.writeIntBE=function(value,offset,byteLength,limit){value=+value,offset|=0,limit||checkInt(this,value,offset,byteLength,(limit=Math.pow(2,8*byteLength-1))-1,-limit);var i=byteLength-1,mul=1,sub=0;for(this[offset+i]=255&value;0<=--i&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i+1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer$1.prototype.writeInt8=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,127,-128),Buffer$1.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),value<0&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer$1.prototype.writeInt16LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer$1.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer$1.prototype.writeInt16BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer$1.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer$1.prototype.writeInt32LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),Buffer$1.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer$1.prototype.writeInt32BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),Buffer$1.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer$1.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer$1.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer$1.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer$1.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer$1.prototype.copy=function(target,targetStart,start,end){if(start=start||0,end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart=targetStart||0,0<end&&end<start&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var i,len=end-start;if(this===target&&start<targetStart&&targetStart<end)for(i=len-1;0<=i;--i)target[i+targetStart]=this[i+start];else if(len<1e3||!Buffer$1.TYPED_ARRAY_SUPPORT)for(i=0;i<len;++i)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);return len},Buffer$1.prototype.fill=function(val,start,end,encoding){if("string"==typeof val){var code;if("string"==typeof start?(encoding=start,start=0,end=this.length):"string"==typeof end&&(encoding=end,end=this.length),1!==val.length||(code=val.charCodeAt(0))<256&&(val=code),void 0!==encoding&&"string"!=typeof encoding)throw new TypeError("encoding must be a string");if("string"==typeof encoding&&!Buffer$1.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding)}else"number"==typeof val&&(val&=255);if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;if(start>>>=0,end=void 0===end?this.length:end>>>0,"number"==typeof(val=val||0))for(i=start;i<end;++i)this[i]=val;else for(var bytes=internalIsBuffer(val)?val:utf8ToBytes(new Buffer$1(val,encoding).toString()),len=bytes.length,i=0;i<end-start;++i)this[i+start]=bytes[i%len];return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(str){if((str=stringtrim(str).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;str.length%4!=0;)str+="=";return str}function stringtrim(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}function toHex(n){return n<16?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){var codePoint;units=units||1/0;for(var length=string.length,leadSurrogate=null,bytes=[],i=0;i<length;++i){if(55295<(codePoint=string.charCodeAt(i))&&codePoint<57344){if(!leadSurrogate){if(56319<codePoint){-1<(units-=3)&&bytes.push(239,191,189);continue}if(i+1===length){-1<(units-=3)&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){-1<(units-=3)&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=65536+(leadSurrogate-55296<<10|codePoint-56320)}else leadSurrogate&&-1<(units-=3)&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if(--units<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(codePoint<1114112))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function asciiToBytes(str){for(var byteArray=[],i=0;i<str.length;++i)byteArray.push(255&str.charCodeAt(i));return byteArray}function utf16leToBytes(str,units){for(var hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);++i)hi=(lo=str.charCodeAt(i))>>8,lo=lo%256,byteArray.push(lo),byteArray.push(hi);return byteArray}function base64ToBytes(str){return toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}function isnan(val){return val!=val}function isBuffer(obj){return null!=obj&&(!!obj._isBuffer||isFastBuffer(obj)||isSlowBuffer(obj))}function isFastBuffer(obj){return!!obj.constructor&&"function"==typeof obj.constructor.isBuffer&&obj.constructor.isBuffer(obj)}function isSlowBuffer(obj){return"function"==typeof obj.readFloatLE&&"function"==typeof obj.slice&&isFastBuffer(obj.slice(0,0))}var bufferEs6=Object.freeze({INSPECT_MAX_BYTES:INSPECT_MAX_BYTES,kMaxLength:_kMaxLength,Buffer:Buffer$1,SlowBuffer:SlowBuffer,isBuffer:isBuffer}),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(fn,module){return fn(module={exports:{}},module.exports),module.exports}var map=createCommonjsModule(function(module){var Map;void 0!==commonjsGlobal.Map?(module.exports=commonjsGlobal.Map,module.exports.Map=commonjsGlobal.Map):((Map=function(array){this._keys=[],this._values={};for(var key,value,i=0;i<array.length;i++)null!=array[i]&&(key=(value=array[i])[0],value=value[1],this._keys.push(key),this._values[key]={v:value,i:this._keys.length-1})}).prototype.clear=function(){this._keys=[],this._values={}},Map.prototype.delete=function(key){var value=this._values[key];return null!=value&&(delete this._values[key],this._keys.splice(value.i,1),!0)},Map.prototype.entries=function(){var self=this,index=0;return{next:function(){var key=self._keys[index++];return{value:void 0!==key?[key,self._values[key].v]:void 0,done:void 0===key}}}},Map.prototype.forEach=function(callback,self){self=self||this;for(var i=0;i<this._keys.length;i++){var key=this._keys[i];callback.call(self,this._values[key].v,key,self)}},Map.prototype.get=function(key){return this._values[key]?this._values[key].v:void 0},Map.prototype.has=function(key){return null!=this._values[key]},Map.prototype.keys=function(){var self=this,index=0;return{next:function(){var key=self._keys[index++];return{value:void 0!==key?key:void 0,done:void 0===key}}}},Map.prototype.set=function(key,value){return this._values[key]?this._values[key].v=value:(this._keys.push(key),this._values[key]={v:value,i:this._keys.length-1}),this},Map.prototype.values=function(){var self=this,index=0;return{next:function(){var key=self._keys[index++];return{value:void 0!==key?self._values[key].v:void 0,done:void 0===key}}}},Object.defineProperty(Map.prototype,"size",{enumerable:!0,get:function(){return this._keys.length}}),module.exports=Map)}),map_1=map.Map,long_1=Long,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function Long(low,high,unsigned){this.low=0|low,this.high=0|high,this.unsigned=!!unsigned}function isLong(obj){return!0===(obj&&obj.__isLong__)}Long.prototype.__isLong__,Object.defineProperty(Long.prototype,"__isLong__",{value:!0}),Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(value,unsigned){var obj,cachedObj,cache;return unsigned?(cache=0<=(value>>>=0)&&value<256)&&(cachedObj=UINT_CACHE[value])?cachedObj:(obj=fromBits(value,(0|value)<0?-1:0,!0),cache&&(UINT_CACHE[value]=obj),obj):(cache=-128<=(value|=0)&&value<128)&&(cachedObj=INT_CACHE[value])?cachedObj:(obj=fromBits(value,value<0?-1:0,!1),cache&&(INT_CACHE[value]=obj),obj)}function fromNumber(value,unsigned){if(isNaN(value))return unsigned?UZERO:ZERO;if(unsigned){if(value<0)return UZERO;if(TWO_PWR_64_DBL<=value)return MAX_UNSIGNED_VALUE}else{if(value<=-TWO_PWR_63_DBL)return MIN_VALUE;if(TWO_PWR_63_DBL<=value+1)return MAX_VALUE}return value<0?fromNumber(-value,unsigned).neg():fromBits(value%TWO_PWR_32_DBL|0,value/TWO_PWR_32_DBL|0,unsigned)}function fromBits(lowBits,highBits,unsigned){return new Long(lowBits,highBits,unsigned)}Long.fromInt=fromInt,Long.fromNumber=fromNumber,Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString$1(str,unsigned,radix){if(0===str.length)throw Error("empty string");if("NaN"===str||"Infinity"===str||"+Infinity"===str||"-Infinity"===str)return ZERO;if(unsigned="number"==typeof unsigned?(radix=unsigned,!1):!!unsigned,(radix=radix||10)<2||36<radix)throw RangeError("radix");var p;if(0<(p=str.indexOf("-")))throw Error("interior hyphen");if(0===p)return fromString$1(str.substring(1),unsigned,radix).neg();for(var radixToPower=fromNumber(pow_dbl(radix,8)),result=ZERO,i=0;i<str.length;i+=8){var power=Math.min(8,str.length-i),value=parseInt(str.substring(i,i+power),radix);result=power<8?(power=fromNumber(pow_dbl(radix,power)),result.mul(power).add(fromNumber(value))):(result=result.mul(radixToPower)).add(fromNumber(value))}return result.unsigned=unsigned,result}function fromValue(val,unsigned){return"number"==typeof val?fromNumber(val,unsigned):"string"==typeof val?fromString$1(val,unsigned):fromBits(val.low,val.high,"boolean"==typeof unsigned?unsigned:val.unsigned)}Long.fromString=fromString$1,Long.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function(radix){if((radix=radix||10)<2||36<radix)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(MIN_VALUE)){var rem1=fromNumber(radix),div=this.div(rem1),rem1=div.mul(rem1).sub(this);return div.toString(radix)+rem1.toInt().toString(radix)}return"-"+this.neg().toString(radix)}for(var radixToPower=fromNumber(pow_dbl(radix,6),this.unsigned),rem=this,result="";;){var remDiv=rem.div(radixToPower),digits=(rem.sub(remDiv.mul(radixToPower)).toInt()>>>0).toString(radix);if((rem=remDiv).isZero())return digits+result;for(;digits.length<6;)digits="0"+digits;result=""+digits+result}},LongPrototype.getHighBits=function(){return this.high},LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0},LongPrototype.getLowBits=function(){return this.low},LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0},LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var val=0!=this.high?this.high:this.low,bit=31;0<bit&&0==(val&1<<bit);bit--);return 0!=this.high?bit+33:bit+1},LongPrototype.isZero=function(){return 0===this.high&&0===this.low},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function(){return this.unsigned||0<=this.high},LongPrototype.isOdd=function(){return 1==(1&this.low)},LongPrototype.isEven=function(){return 0==(1&this.low)},LongPrototype.equals=function(other){return isLong(other)||(other=fromValue(other)),(this.unsigned===other.unsigned||this.high>>>31!=1||other.high>>>31!=1)&&(this.high===other.high&&this.low===other.low)},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function(other){return!this.eq(other)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function(other){return this.comp(other)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(other){return this.comp(other)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function(other){return 0<this.comp(other)},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function(other){return 0<=this.comp(other)},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function(other){if(isLong(other)||(other=fromValue(other)),this.eq(other))return 0;var thisNeg=this.isNegative(),otherNeg=other.isNegative();return thisNeg&&!otherNeg?-1:!thisNeg&&otherNeg?1:this.unsigned?other.high>>>0>this.high>>>0||other.high===this.high&&other.low>>>0>this.low>>>0?-1:1:this.sub(other).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function(addend){isLong(addend)||(addend=fromValue(addend));var a48=this.high>>>16,a32=65535&this.high,a16=this.low>>>16,a00=65535&this.low,b48=addend.high>>>16,b32=65535&addend.high,b16=addend.low>>>16,c48=0,c32=0,c16=0,c00=0;return c16+=(c00+=a00+(65535&addend.low))>>>16,c32+=(c16+=a16+b16)>>>16,c48+=(c32+=a32+b32)>>>16,c48+=a48+b48,fromBits((c16&=65535)<<16|(c00&=65535),(c48&=65535)<<16|(c32&=65535),this.unsigned)},LongPrototype.subtract=function(subtrahend){return isLong(subtrahend)||(subtrahend=fromValue(subtrahend)),this.add(subtrahend.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function(c00){if(this.isZero())return ZERO;if(isLong(c00)||(c00=fromValue(c00)),wasm)return fromBits(wasm.mul(this.low,this.high,c00.low,c00.high),wasm.get_high(),this.unsigned);if(c00.isZero())return ZERO;if(this.eq(MIN_VALUE))return c00.isOdd()?MIN_VALUE:ZERO;if(c00.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return c00.isNegative()?this.neg().mul(c00.neg()):this.neg().mul(c00).neg();if(c00.isNegative())return this.mul(c00.neg()).neg();if(this.lt(TWO_PWR_24)&&c00.lt(TWO_PWR_24))return fromNumber(this.toNumber()*c00.toNumber(),this.unsigned);var a48=this.high>>>16,a32=65535&this.high,a16=this.low>>>16,a00=65535&this.low,b48=c00.high>>>16,b32=65535&c00.high,b16=c00.low>>>16,b00=65535&c00.low,c48=0,c32=0,c16=0,c00=0;return c16+=(c00+=a00*b00)>>>16,c32+=(c16+=a16*b00)>>>16,c16&=65535,c32+=(c16+=a00*b16)>>>16,c48+=(c32+=a32*b00)>>>16,c32&=65535,c48+=(c32+=a16*b16)>>>16,c32&=65535,c48+=(c32+=a00*b32)>>>16,c48+=a48*b00+a32*b16+a16*b32+a00*b48,fromBits((c16&=65535)<<16|(c00&=65535),(c48&=65535)<<16|(c32&=65535),this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function(divisor){if(isLong(divisor)||(divisor=fromValue(divisor)),divisor.isZero())throw Error("division by zero");var rem,res,approx;if(wasm)return this.unsigned||-2147483648!==this.high||-1!==divisor.low||-1!==divisor.high?fromBits((this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,divisor.low,divisor.high),wasm.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?UZERO:ZERO;if(this.unsigned){if(divisor.unsigned||(divisor=divisor.toUnsigned()),divisor.gt(this))return UZERO;if(divisor.gt(this.shru(1)))return UONE;res=UZERO}else{if(this.eq(MIN_VALUE))return divisor.eq(ONE)||divisor.eq(NEG_ONE)?MIN_VALUE:divisor.eq(MIN_VALUE)?ONE:(approx=this.shr(1).div(divisor).shl(1)).eq(ZERO)?divisor.isNegative()?ONE:NEG_ONE:(rem=this.sub(divisor.mul(approx)),res=approx.add(rem.div(divisor)));else if(divisor.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return divisor.isNegative()?this.neg().div(divisor.neg()):this.neg().div(divisor).neg();if(divisor.isNegative())return this.div(divisor.neg()).neg();res=ZERO}for(rem=this;rem.gte(divisor);){approx=Math.max(1,Math.floor(rem.toNumber()/divisor.toNumber()));for(var log2=Math.ceil(Math.log(approx)/Math.LN2),delta=log2<=48?1:pow_dbl(2,log2-48),approxRes=fromNumber(approx),approxRem=approxRes.mul(divisor);approxRem.isNegative()||approxRem.gt(rem);)approxRem=(approxRes=fromNumber(approx-=delta,this.unsigned)).mul(divisor);approxRes.isZero()&&(approxRes=ONE),res=res.add(approxRes),rem=rem.sub(approxRem)}return res},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function(divisor){return isLong(divisor)||(divisor=fromValue(divisor)),wasm?fromBits((this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,divisor.low,divisor.high),wasm.get_high(),this.unsigned):this.sub(this.div(divisor).mul(divisor))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.and=function(other){return isLong(other)||(other=fromValue(other)),fromBits(this.low&other.low,this.high&other.high,this.unsigned)},LongPrototype.or=function(other){return isLong(other)||(other=fromValue(other)),fromBits(this.low|other.low,this.high|other.high,this.unsigned)},LongPrototype.xor=function(other){return isLong(other)||(other=fromValue(other)),fromBits(this.low^other.low,this.high^other.high,this.unsigned)},LongPrototype.shiftLeft=function(numBits){return isLong(numBits)&&(numBits=numBits.toInt()),0==(numBits&=63)?this:numBits<32?fromBits(this.low<<numBits,this.high<<numBits|this.low>>>32-numBits,this.unsigned):fromBits(0,this.low<<numBits-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function(numBits){return isLong(numBits)&&(numBits=numBits.toInt()),0==(numBits&=63)?this:numBits<32?fromBits(this.low>>>numBits|this.high<<32-numBits,this.high>>numBits,this.unsigned):fromBits(this.high>>numBits-32,0<=this.high?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function(numBits){if(isLong(numBits)&&(numBits=numBits.toInt()),0===(numBits&=63))return this;var high=this.high;return numBits<32?fromBits(this.low>>>numBits|high<<32-numBits,high>>>numBits,this.unsigned):fromBits(32===numBits?high:high>>>numBits-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function(le){return le?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function(){var hi=this.high,lo=this.low;return[255&lo,lo>>>8&255,lo>>>16&255,lo>>>24,255&hi,hi>>>8&255,hi>>>16&255,hi>>>24]},LongPrototype.toBytesBE=function(){var hi=this.high,lo=this.low;return[hi>>>24,hi>>>16&255,hi>>>8&255,255&hi,lo>>>24,lo>>>16&255,lo>>>8&255,255&lo]},Long.fromBytes=function(bytes,unsigned,le){return le?Long.fromBytesLE(bytes,unsigned):Long.fromBytesBE(bytes,unsigned)},Long.fromBytesLE=function(bytes,unsigned){return new Long(bytes[0]|bytes[1]<<8|bytes[2]<<16|bytes[3]<<24,bytes[4]|bytes[5]<<8|bytes[6]<<16|bytes[7]<<24,unsigned)},Long.fromBytesBE=function(bytes,unsigned){return new Long(bytes[4]<<24|bytes[5]<<16|bytes[6]<<8|bytes[7],bytes[0]<<24|bytes[1]<<16|bytes[2]<<8|bytes[3],unsigned)},long_1.prototype.toExtendedJSON=function(options){return options&&options.relaxed?this.toNumber():{$numberLong:this.toString()}},long_1.fromExtendedJSON=function(result,options){result=long_1.fromString(result.$numberLong);return options&&options.relaxed?result.toNumber():result},Object.defineProperty(long_1.prototype,"_bsontype",{value:"Long"});var long_1$1=long_1;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var Double=function(){function Double(value){_classCallCheck(this,Double),value instanceof Number&&(value=value.valueOf()),this.value=value}return _createClass(Double,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(options){return options&&(options.legacy||options.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-".concat(this.value.toFixed(1))}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(doubleValue,options){doubleValue=parseFloat(doubleValue.$numberDouble);return options&&options.relaxed?doubleValue:new Double(doubleValue)}}]),Double}();Object.defineProperty(Double.prototype,"_bsontype",{value:"Double"});var double_1=Double;function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck$1(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass$1(Constructor,protoProps,staticProps){return protoProps&&_defineProperties$1(Constructor.prototype,protoProps),staticProps&&_defineProperties$1(Constructor,staticProps),Constructor}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var Timestamp=function(){function Timestamp(low,_this){return _classCallCheck$1(this,Timestamp),_this=long_1$1.isLong(low)?_possibleConstructorReturn(this,_getPrototypeOf(Timestamp).call(this,low.low,low.high,!0)):_possibleConstructorReturn(this,_getPrototypeOf(Timestamp).call(this,low,_this,!0)),_possibleConstructorReturn(_this)}return _inherits(Timestamp,long_1$1),_createClass$1(Timestamp,[{key:"toJSON",value:function(){return{$timestamp:this.toString()}}},{key:"toExtendedJSON",value:function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}}}],[{key:"fromInt",value:function(value){return new Timestamp(long_1$1.fromInt(value,!0))}},{key:"fromNumber",value:function(value){return new Timestamp(long_1$1.fromNumber(value,!0))}},{key:"fromBits",value:function(lowBits,highBits){return new Timestamp(lowBits,highBits)}},{key:"fromString",value:function(str,opt_radix){return new Timestamp(long_1$1.fromString(str,opt_radix,!0))}},{key:"fromExtendedJSON",value:function(doc){return new Timestamp(doc.$timestamp.i,doc.$timestamp.t)}}]),Timestamp}();Object.defineProperty(Timestamp.prototype,"_bsontype",{value:"Timestamp"}),Timestamp.MAX_VALUE=Timestamp.MAX_UNSIGNED_VALUE;var timestamp=Timestamp,require$$0={};function normalizedFunctionString(fn){return fn.toString().replace("function(","function (")}function insecureRandomBytes(size){for(var result=new Uint8Array(size),i=0;i<size;++i)result[i]=Math.floor(256*Math.random());return result}var randomBytes=insecureRandomBytes;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues)randomBytes=function(size){return window.crypto.getRandomValues(new Uint8Array(size))};else{try{randomBytes=require$$0.randomBytes}catch(e){}null==randomBytes&&(randomBytes=insecureRandomBytes)}var utils={normalizedFunctionString:normalizedFunctionString,randomBytes:randomBytes};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}"function"==typeof global.setTimeout&&(cachedSetTimeout=setTimeout),"function"==typeof global.clearTimeout&&(cachedClearTimeout=clearTimeout);var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function nextTick(fun){var args=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)}function Item(fun,array){this.fun=fun,this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title="browser",platform="browser",browser=!0,env={},argv=[],version="",versions={},release={},config={};function noop(){}var on=noop,addListener=noop,once=noop,off=noop,removeListener=noop,removeAllListeners=noop,emit=noop;function binding(name){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(dir){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance=global.performance||{},performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()};function hrtime(previousTimestamp){var nanoseconds=.001*performanceNow.call(performance),seconds=Math.floor(nanoseconds),nanoseconds=Math.floor(nanoseconds%1*1e9);return previousTimestamp&&(seconds-=previousTimestamp[0],(nanoseconds-=previousTimestamp[1])<0&&(seconds--,nanoseconds+=1e9)),[seconds,nanoseconds]}var startTime=new Date;function uptime(){return(new Date-startTime)/1e3}var process={nextTick:nextTick,title:title,browser:browser,env:env,argv:argv,version:version,versions:versions,on:on,addListener:addListener,once:once,off:off,removeListener:removeListener,removeAllListeners:removeAllListeners,emit:emit,binding:binding,cwd:cwd,chdir:chdir,umask:umask,hrtime:hrtime,platform:platform,release:release,config:config,uptime:uptime},inherits,inherits="function"==typeof Object.create?function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor},inherits$1=inherits;function _typeof$1(obj){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var formatRegExp=/%[sdj%]/g;function format(f){if(!isString(f)){for(var objects=[],i=0;i<arguments.length;i++)objects.push(inspect(arguments[i]));return objects.join(" ")}for(var i=1,args=arguments,len=args.length,str=String(f).replace(formatRegExp,function(x){if("%%"===x)return"%";if(len<=i)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}}),x=args[i];i<len;x=args[++i])isNull(x)||!isObject(x)?str+=" "+x:str+=" "+inspect(x);return str}function deprecate(fn,msg){if(isUndefined(global.process))return function(){return deprecate(fn,msg).apply(this,arguments)};var warned=!1;return function(){return warned||(console.error(msg),warned=!0),fn.apply(this,arguments)}}var debugs={},debugEnviron;function debuglog(set){return isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),set=set.toUpperCase(),debugs[set]||(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)?debugs[set]=function(){var msg=format.apply(null,arguments);console.error("%s %d: %s",set,0,msg)}:debugs[set]=function(){}),debugs[set]}function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};return 3<=arguments.length&&(ctx.depth=arguments[2]),4<=arguments.length&&(ctx.colors=arguments[3]),isBoolean(opts)?ctx.showHidden=opts:opts&&_extend(ctx,opts),isUndefined(ctx.showHidden)&&(ctx.showHidden=!1),isUndefined(ctx.depth)&&(ctx.depth=2),isUndefined(ctx.colors)&&(ctx.colors=!1),isUndefined(ctx.customInspect)&&(ctx.customInspect=!0),ctx.colors&&(ctx.stylize=stylizeWithColor),formatValue(ctx,obj,ctx.depth)}function stylizeWithColor(str,style){style=inspect.styles[style];return style?"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m":str}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};return array.forEach(function(val,idx){hash[val]=!0}),hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==inspect&&(!value.constructor||value.constructor.prototype!==value)){var output=value.inspect(recurseTimes,ctx);return isString(output)||(output=formatValue(ctx,output,recurseTimes)),output}var base=formatPrimitive(ctx,value);if(base)return base;var output=Object.keys(value),visibleKeys=arrayToHash(output);if(ctx.showHidden&&(output=Object.getOwnPropertyNames(value)),isError(value)&&(0<=output.indexOf("message")||0<=output.indexOf("description")))return formatError(value);if(0===output.length){if(isFunction(value)){var braces=value.name?": "+value.name:"";return ctx.stylize("[Function"+braces+"]","special")}if(isRegExp(value))return ctx.stylize(RegExp.prototype.toString.call(value),"regexp");if(isDate(value))return ctx.stylize(Date.prototype.toString.call(value),"date");if(isError(value))return formatError(value)}var base="",array=!1,braces=["{","}"];return isArray$1(value)&&(array=!0,braces=["[","]"]),isFunction(value)&&(base=" [Function"+(value.name?": "+value.name:"")+"]"),isRegExp(value)&&(base=" "+RegExp.prototype.toString.call(value)),isDate(value)&&(base=" "+Date.prototype.toUTCString.call(value)),isError(value)&&(base=" "+formatError(value)),0!==output.length||array&&0!=value.length?recurseTimes<0?isRegExp(value)?ctx.stylize(RegExp.prototype.toString.call(value),"regexp"):ctx.stylize("[Object]","special"):(ctx.seen.push(value),output=array?formatArray(ctx,value,recurseTimes,visibleKeys,output):output.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)}),ctx.seen.pop(),reduceToSingleString(output,base,braces)):braces[0]+base+braces[1]}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}return isNumber(value)?ctx.stylize(""+value,"number"):isBoolean(value)?ctx.stylize(""+value,"boolean"):isNull(value)?ctx.stylize("null","null"):void 0}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){for(var output=[],i=0,l=value.length;i<l;++i)hasOwnProperty(value,String(i))?output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),!0)):output.push("");return keys.forEach(function(key){key.match(/^\d+$/)||output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,!0))}),output}function formatProperty(ctx,desc,recurseTimes,visibleKeys,key,array){var name,str,desc=Object.getOwnPropertyDescriptor(desc,key)||{value:desc[key]};if(desc.get?str=desc.set?ctx.stylize("[Getter/Setter]","special"):ctx.stylize("[Getter]","special"):desc.set&&(str=ctx.stylize("[Setter]","special")),hasOwnProperty(visibleKeys,key)||(name="["+key+"]"),str||(ctx.seen.indexOf(desc.value)<0?-1<(str=isNull(recurseTimes)?formatValue(ctx,desc.value,null):formatValue(ctx,desc.value,recurseTimes-1)).indexOf("\n")&&(str=array?str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2):"\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")):str=ctx.stylize("[Circular]","special")),isUndefined(name)){if(array&&key.match(/^\d+$/))return str;name=(name=JSON.stringify(""+key)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(name=name.substr(1,name.length-2),ctx.stylize(name,"name")):(name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ctx.stylize(name,"string"))}return name+": "+str}function reduceToSingleString(output,base,braces){return 60<output.reduce(function(prev,cur){return cur.indexOf("\n"),prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0)?braces[0]+(""===base?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]:braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray$1(ar){return Array.isArray(ar)}function isBoolean(arg){return"boolean"==typeof arg}function isNull(arg){return null===arg}function isNullOrUndefined(arg){return null==arg}function isNumber(arg){return"number"==typeof arg}function isString(arg){return"string"==typeof arg}function isSymbol(arg){return"symbol"===_typeof$1(arg)}function isUndefined(arg){return void 0===arg}function isRegExp(re){return isObject(re)&&"[object RegExp]"===objectToString(re)}function isObject(arg){return"object"===_typeof$1(arg)&&null!==arg}function isDate(d){return isObject(d)&&"[object Date]"===objectToString(d)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(arg){return"function"==typeof arg}function isPrimitive(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"===_typeof$1(arg)||void 0===arg}function isBuffer$1(maybeBuf){return Buffer.isBuffer(maybeBuf)}function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp$1(){var d=new Date,time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}function log(){console.log("%s - %s",timestamp$1(),format.apply(null,arguments))}function _extend(origin,add){if(!add||!isObject(add))return origin;for(var keys=Object.keys(add),i=keys.length;i--;)origin[keys[i]]=add[keys[i]];return origin}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var util={inherits:inherits$1,_extend:_extend,log:log,isBuffer:isBuffer$1,isPrimitive:isPrimitive,isFunction:isFunction,isError:isError,isDate:isDate,isObject:isObject,isRegExp:isRegExp,isUndefined:isUndefined,isSymbol:isSymbol,isString:isString,isNumber:isNumber,isNullOrUndefined:isNullOrUndefined,isNull:isNull,isBoolean:isBoolean,isArray:isArray$1,inspect:inspect,deprecate:deprecate,format:format,debuglog:debuglog};function _classCallCheck$2(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass$2(Constructor,protoProps,staticProps){return protoProps&&_defineProperties$2(Constructor.prototype,protoProps),staticProps&&_defineProperties$2(Constructor,staticProps),Constructor}var Buffer$2=bufferEs6.Buffer,randomBytes$1=utils.randomBytes,deprecate$1=util.deprecate,PROCESS_UNIQUE=randomBytes$1(5),checkForHexRegExp=new RegExp("^[0-9a-fA-F]{24}$"),hasBufferType=!1;try{Buffer$2&&Buffer$2.from&&(hasBufferType=!0)}catch(err){hasBufferType=!1}for(var hexTable=[],_i=0;_i<256;_i++)hexTable[_i]=(_i<=15?"0":"")+_i.toString(16);for(var decodeLookup=[],i=0;i<10;)decodeLookup[48+i]=i++;for(;i<16;)decodeLookup[55+i]=decodeLookup[87+i]=i++;var _Buffer=Buffer$2;function convertToHex(bytes){return bytes.toString("hex")}function makeObjectIdError(invalidString,index){var invalidCharacter=invalidString[index];return new TypeError('ObjectId string "'.concat(invalidString,'" contains invalid character "').concat(invalidCharacter,'" with character code (').concat(invalidString.charCodeAt(index),"). All character codes for a non-hex string must be less than 256."))}var ObjectId=function(){function ObjectId(id){if(_classCallCheck$2(this,ObjectId),id instanceof ObjectId)return id;if(null==id||"number"==typeof id)return this.id=ObjectId.generate(id),void(ObjectId.cacheHexString&&(this.__id=this.toString("hex")));var valid=ObjectId.isValid(id);if(!valid&&null!=id)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(valid&&"string"==typeof id&&24===id.length&&hasBufferType)return new ObjectId(Buffer$2.from(id,"hex"));if(valid&&"string"==typeof id&&24===id.length)return ObjectId.createFromHexString(id);if(null==id||12!==id.length){if(null!=id&&id.toHexString)return ObjectId.createFromHexString(id.toHexString());throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}this.id=id,ObjectId.cacheHexString&&(this.__id=this.toString("hex"))}return _createClass$2(ObjectId,[{key:"toHexString",value:function(){if(ObjectId.cacheHexString&&this.__id)return this.__id;var hexString="";if(!this.id||!this.id.length)throw new TypeError("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof _Buffer)return hexString=convertToHex(this.id),ObjectId.cacheHexString&&(this.__id=hexString),hexString;for(var _i2=0;_i2<this.id.length;_i2++){var hexChar=hexTable[this.id.charCodeAt(_i2)];if("string"!=typeof hexChar)throw makeObjectIdError(this.id,_i2);hexString+=hexChar}return ObjectId.cacheHexString&&(this.__id=hexString),hexString}},{key:"toString",value:function(format){return this.id&&this.id.copy?this.id.toString("string"==typeof format?format:"hex"):this.toHexString()}},{key:"toJSON",value:function(){return this.toHexString()}},{key:"equals",value:function(otherId){return otherId instanceof ObjectId?this.toString()===otherId.toString():"string"==typeof otherId&&ObjectId.isValid(otherId)&&12===otherId.length&&this.id instanceof _Buffer?otherId===this.id.toString("binary"):"string"==typeof otherId&&ObjectId.isValid(otherId)&&24===otherId.length?otherId.toLowerCase()===this.toHexString():"string"==typeof otherId&&ObjectId.isValid(otherId)&&12===otherId.length?otherId===this.id:!(null==otherId||!(otherId instanceof ObjectId||otherId.toHexString))&&otherId.toHexString()===this.toHexString()}},{key:"getTimestamp",value:function(){var timestamp=new Date,time=this.id.readUInt32BE(0);return timestamp.setTime(1e3*Math.floor(time)),timestamp}},{key:"toExtendedJSON",value:function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}}],[{key:"getInc",value:function(){return ObjectId.index=(ObjectId.index+1)%16777215}},{key:"generate",value:function(time){"number"!=typeof time&&(time=~~(Date.now()/1e3));var inc=ObjectId.getInc(),buffer=Buffer$2.alloc(12);return buffer[3]=255&time,buffer[2]=time>>8&255,buffer[1]=time>>16&255,buffer[0]=time>>24&255,buffer[4]=PROCESS_UNIQUE[0],buffer[5]=PROCESS_UNIQUE[1],buffer[6]=PROCESS_UNIQUE[2],buffer[7]=PROCESS_UNIQUE[3],buffer[8]=PROCESS_UNIQUE[4],buffer[11]=255&inc,buffer[10]=inc>>8&255,buffer[9]=inc>>16&255,buffer}},{key:"createPk",value:function(){return new ObjectId}},{key:"createFromTime",value:function(time){var buffer=Buffer$2.from([0,0,0,0,0,0,0,0,0,0,0,0]);return buffer[3]=255&time,buffer[2]=time>>8&255,buffer[1]=time>>16&255,buffer[0]=time>>24&255,new ObjectId(buffer)}},{key:"createFromHexString",value:function(string){if(void 0===string||null!=string&&24!==string.length)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(hasBufferType)return new ObjectId(Buffer$2.from(string,"hex"));for(var array=new _Buffer(12),n=0,i=0;i<24;)array[n++]=decodeLookup[string.charCodeAt(i++)]<<4|decodeLookup[string.charCodeAt(i++)];return new ObjectId(array)}},{key:"isValid",value:function(id){return null!=id&&("number"==typeof id||("string"==typeof id?12===id.length||24===id.length&&checkForHexRegExp.test(id):id instanceof ObjectId||(id instanceof _Buffer&&12===id.length||!!id.toHexString&&(12===id.id.length||24===id.id.length&&checkForHexRegExp.test(id.id)))))}},{key:"fromExtendedJSON",value:function(doc){return new ObjectId(doc.$oid)}}]),ObjectId}();ObjectId.get_inc=deprecate$1(function(){return ObjectId.getInc()},"Please use the static `ObjectId.getInc()` instead"),ObjectId.prototype.get_inc=deprecate$1(function(){return ObjectId.getInc()},"Please use the static `ObjectId.getInc()` instead"),ObjectId.prototype.getInc=deprecate$1(function(){return ObjectId.getInc()},"Please use the static `ObjectId.getInc()` instead"),ObjectId.prototype.generate=deprecate$1(function(time){return ObjectId.generate(time)},"Please use the static `ObjectId.generate(time)` instead"),Object.defineProperty(ObjectId.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(value){this.id[3]=255&value,this.id[2]=value>>8&255,this.id[1]=value>>16&255,this.id[0]=value>>24&255}}),ObjectId.prototype[util.inspect.custom||"inspect"]=ObjectId.prototype.toString,ObjectId.index=~~(16777215*Math.random()),Object.defineProperty(ObjectId.prototype,"_bsontype",{value:"ObjectID"});var objectid=ObjectId;function _classCallCheck$3(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass$3(Constructor,protoProps,staticProps){return protoProps&&_defineProperties$3(Constructor.prototype,protoProps),staticProps&&_defineProperties$3(Constructor,staticProps),Constructor}function alphabetize(str){return str.split("").sort().join("")}var BSONRegExp=function(){function BSONRegExp(pattern,options){_classCallCheck$3(this,BSONRegExp),this.pattern=pattern||"",this.options=options?alphabetize(options):"";for(var i=0;i<this.options.length;i++)if("i"!==this.options[i]&&"m"!==this.options[i]&&"x"!==this.options[i]&&"l"!==this.options[i]&&"s"!==this.options[i]&&"u"!==this.options[i])throw new Error("The regular expression option [".concat(this.options[i],"] is not supported"))}return _createClass$3(BSONRegExp,[{key:"toExtendedJSON",value:function(options){return(options=options||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}}],[{key:"parseOptions",value:function(options){return options?options.split("").sort().join(""):""}},{key:"fromExtendedJSON",value:function(doc){return doc.$regex?"BSONRegExp"===doc.$regex._bsontype?doc:new BSONRegExp(doc.$regex,BSONRegExp.parseOptions(doc.$options)):new BSONRegExp(doc.$regularExpression.pattern,BSONRegExp.parseOptions(doc.$regularExpression.options))}}]),BSONRegExp}();Object.defineProperty(BSONRegExp.prototype,"_bsontype",{value:"BSONRegExp"});var regexp=BSONRegExp;function _classCallCheck$4(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass$4(Constructor,protoProps,staticProps){return protoProps&&_defineProperties$4(Constructor.prototype,protoProps),staticProps&&_defineProperties$4(Constructor,staticProps),Constructor}var BSONSymbol=function(){function BSONSymbol(value){_classCallCheck$4(this,BSONSymbol),this.value=value}return _createClass$4(BSONSymbol,[{key:"valueOf",value:function(){return this.value}},{key:"toString",value:function(){return this.value}},{key:"inspect",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(){return{$symbol:this.value}}}],[{key:"fromExtendedJSON",value:function(doc){return new BSONSymbol(doc.$symbol)}}]),BSONSymbol}();Object.defineProperty(BSONSymbol.prototype,"_bsontype",{value:"Symbol"});var symbol=BSONSymbol;function _classCallCheck$5(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass$5(Constructor,protoProps,staticProps){return protoProps&&_defineProperties$5(Constructor.prototype,protoProps),staticProps&&_defineProperties$5(Constructor,staticProps),Constructor}var Int32=function(){function Int32(value){_classCallCheck$5(this,Int32),value instanceof Number&&(value=value.valueOf()),this.value=value}return _createClass$5(Int32,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(options){return options&&(options.relaxed||options.legacy)?this.value:{$numberInt:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(doc,options){return options&&options.relaxed?parseInt(doc.$numberInt,10):new Int32(doc.$numberInt)}}]),Int32}();Object.defineProperty(Int32.prototype,"_bsontype",{value:"Int32"});var int_32=Int32;function _classCallCheck$6(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass$6(Constructor,protoProps,staticProps){return protoProps&&_defineProperties$6(Constructor.prototype,protoProps),staticProps&&_defineProperties$6(Constructor,staticProps),Constructor}var Code=function(){function Code(code,scope){_classCallCheck$6(this,Code),this.code=code,this.scope=scope}return _createClass$6(Code,[{key:"toJSON",value:function(){return{scope:this.scope,code:this.code}}},{key:"toExtendedJSON",value:function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}}],[{key:"fromExtendedJSON",value:function(doc){return new Code(doc.$code,doc.$scope)}}]),Code}();Object.defineProperty(Code.prototype,"_bsontype",{value:"Code"});var code=Code,Buffer$3=bufferEs6.Buffer,PARSE_STRING_REGEXP=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,PARSE_INF_REGEXP=/^(\+|-)?(Infinity|inf)$/i,PARSE_NAN_REGEXP=/^(\+|-)?NaN$/i,EXPONENT_MAX=6111,EXPONENT_MIN=-6176,EXPONENT_BIAS=6176,MAX_DIGITS=34,NAN_BUFFER=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),INF_NEGATIVE_BUFFER=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),INF_POSITIVE_BUFFER=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),EXPONENT_REGEX=/^([-+])?(\d+)?$/;function isDigit(value){return!isNaN(parseInt(value,10))}function divideu128(value){var DIVISOR=long_1$1.fromNumber(1e9),_rem=long_1$1.fromNumber(0);if(!(value.parts[0]||value.parts[1]||value.parts[2]||value.parts[3]))return{quotient:value,rem:_rem};for(var i=0;i<=3;i++)_rem=(_rem=_rem.shiftLeft(32)).add(new long_1$1(value.parts[i],0)),value.parts[i]=_rem.div(DIVISOR).low,_rem=_rem.modulo(DIVISOR);return{quotient:value,rem:_rem}}function multiply64x2(productLow,productHigh){if(!productLow&&!productHigh)return{high:long_1$1.fromNumber(0),low:long_1$1.fromNumber(0)};var productMid=productLow.shiftRightUnsigned(32),leftLow=new long_1$1(productLow.getLowBits(),0),productMid2=productHigh.shiftRightUnsigned(32),productLow=new long_1$1(productHigh.getLowBits(),0),productHigh=productMid.multiply(productMid2),productMid=productMid.multiply(productLow),productMid2=leftLow.multiply(productMid2),productLow=leftLow.multiply(productLow),productHigh=productHigh.add(productMid.shiftRightUnsigned(32)),productMid=new long_1$1(productMid.getLowBits(),0).add(productMid2).add(productLow.shiftRightUnsigned(32));return{high:productHigh=productHigh.add(productMid.shiftRightUnsigned(32)),low:productLow=productMid.shiftLeft(32).add(new long_1$1(productLow.getLowBits(),0))}}function lessThan(left,right){var uhleft=left.high>>>0,uhright=right.high>>>0;return uhleft<uhright||uhleft==uhright&&left.low>>>0<right.low>>>0}function invalidErr(string,message){throw new TypeError('"'.concat(string,'" is not a valid Decimal128 string - ').concat(message))}function Decimal128(bytes){this.bytes=bytes}Decimal128.fromString=function(string){var biasedExponent,isNegative=!1,sawRadix=!1,foundNonZero=!1,significantDigits=0,nDigitsRead=0,nDigits=0,radixPosition=0,firstNonZero=0,digits=[0],nDigitsStored=0,digitsInsert=0,firstDigit=0,lastDigit=0,exponent=0,i=0,significandHigh=[0,0],significandLow=[0,0],index=0;if(7e3<=string.length)throw new TypeError(string+" not a valid Decimal128 string");var unsignedNumber,expNumber=string.match(PARSE_STRING_REGEXP),e=string.match(PARSE_INF_REGEXP),expSign=string.match(PARSE_NAN_REGEXP);if(!expNumber&&!e&&!expSign||0===string.length)throw new TypeError(string+" not a valid Decimal128 string");if(expNumber&&(unsignedNumber=expNumber[2],e=expNumber[4],expSign=expNumber[5],expNumber=expNumber[6],e&&void 0===expNumber&&invalidErr(string,"missing exponent power"),e&&void 0===unsignedNumber&&invalidErr(string,"missing exponent base"),void 0===e&&(expSign||expNumber)&&invalidErr(string,"missing e before exponent")),"+"!==string[index]&&"-"!==string[index]||(isNegative="-"===string[index++]),!isDigit(string[index])&&"."!==string[index]){if("i"===string[index]||"I"===string[index])return new Decimal128(Buffer$3.from(isNegative?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER));if("N"===string[index])return new Decimal128(Buffer$3.from(NAN_BUFFER))}for(;isDigit(string[index])||"."===string[index];)"."!==string[index]?(nDigitsStored<34&&("0"===string[index]&&!foundNonZero||(foundNonZero||(firstNonZero=nDigitsRead),foundNonZero=!0,digits[digitsInsert++]=parseInt(string[index],10),nDigitsStored+=1)),foundNonZero&&(nDigits+=1),sawRadix&&(radixPosition+=1),nDigitsRead+=1):(sawRadix&&invalidErr(string,"contains multiple periods"),sawRadix=!0),index+=1;if(sawRadix&&!nDigitsRead)throw new TypeError(string+" not a valid Decimal128 string");if("e"===string[index]||"E"===string[index]){var buffer=string.substr(++index).match(EXPONENT_REGEX);if(!buffer||!buffer[2])return new Decimal128(Buffer$3.from(NAN_BUFFER));exponent=parseInt(buffer[0],10),index+=buffer[0].length}if(string[index])return new Decimal128(Buffer$3.from(NAN_BUFFER));if(firstDigit=0,nDigitsStored){if(lastDigit=nDigitsStored-1,1!==(significantDigits=nDigits))for(;"0"===string[firstNonZero+significantDigits-1];)--significantDigits}else nDigitsStored=nDigits=1,significantDigits=digits[lastDigit=firstDigit=0]=0;for(exponent<=radixPosition&&16384<radixPosition-exponent?exponent=EXPONENT_MIN:exponent-=radixPosition;EXPONENT_MAX<exponent;){if(MAX_DIGITS<(lastDigit+=1)-firstDigit){if(digits.join("").match(/^0+$/)){exponent=EXPONENT_MAX;break}invalidErr(string,"overflow")}--exponent}for(;exponent<EXPONENT_MIN||nDigitsStored<nDigits;){if(0===lastDigit&&significantDigits<nDigitsStored){exponent=EXPONENT_MIN,significantDigits=0;break}if(nDigitsStored<nDigits?--nDigits:--lastDigit,exponent<EXPONENT_MAX)exponent+=1;else{if(digits.join("").match(/^0+$/)){exponent=EXPONENT_MAX;break}invalidErr(string,"overflow")}}if(lastDigit-firstDigit+1<significantDigits){var endOfString=nDigitsRead;sawRadix&&(firstNonZero+=1,endOfString+=1),isNegative&&(firstNonZero+=1,endOfString+=1);var dec=parseInt(string[firstNonZero+lastDigit+1],10),roundBit=0;if(5<=dec&&(roundBit=1,5===dec))for(roundBit=digits[lastDigit]%2==1,i=firstNonZero+lastDigit+2;i<endOfString;i++)if(parseInt(string[i],10)){roundBit=1;break}if(roundBit)for(var dIdx=lastDigit;0<=dIdx;dIdx--)if(9<++digits[dIdx]&&(digits[dIdx]=0)===dIdx){if(!(exponent<EXPONENT_MAX))return new Decimal128(Buffer$3.from(isNegative?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER));exponent+=1,digits[dIdx]=1}}if(significandHigh=long_1$1.fromNumber(0),significandLow=long_1$1.fromNumber(0),0===significantDigits)significandHigh=long_1$1.fromNumber(0),significandLow=long_1$1.fromNumber(0);else if(lastDigit-firstDigit<17)for(var _dIdx=firstDigit,significandLow=long_1$1.fromNumber(digits[_dIdx++]),significandHigh=new long_1$1(0,0);_dIdx<=lastDigit;_dIdx++)significandLow=(significandLow=significandLow.multiply(long_1$1.fromNumber(10))).add(long_1$1.fromNumber(digits[_dIdx]));else{var _dIdx2=firstDigit;for(significandHigh=long_1$1.fromNumber(digits[_dIdx2++]);_dIdx2<=lastDigit-17;_dIdx2++)significandHigh=(significandHigh=significandHigh.multiply(long_1$1.fromNumber(10))).add(long_1$1.fromNumber(digits[_dIdx2]));for(significandLow=long_1$1.fromNumber(digits[_dIdx2++]);_dIdx2<=lastDigit;_dIdx2++)significandLow=(significandLow=significandLow.multiply(long_1$1.fromNumber(10))).add(long_1$1.fromNumber(digits[_dIdx2]))}buffer=multiply64x2(significandHigh,long_1$1.fromString("100000000000000000"));buffer.low=buffer.low.add(significandLow),lessThan(buffer.low,significandLow)&&(buffer.high=buffer.high.add(long_1$1.fromNumber(1))),biasedExponent=exponent+EXPONENT_BIAS;dec={low:long_1$1.fromNumber(0),high:long_1$1.fromNumber(0)};buffer.high.shiftRightUnsigned(49).and(long_1$1.fromNumber(1)).equals(long_1$1.fromNumber(1))?(dec.high=dec.high.or(long_1$1.fromNumber(3).shiftLeft(61)),dec.high=dec.high.or(long_1$1.fromNumber(biasedExponent).and(long_1$1.fromNumber(16383).shiftLeft(47))),dec.high=dec.high.or(buffer.high.and(long_1$1.fromNumber(0x7fffffffffff)))):(dec.high=dec.high.or(long_1$1.fromNumber(16383&biasedExponent).shiftLeft(49)),dec.high=dec.high.or(buffer.high.and(long_1$1.fromNumber(562949953421311)))),dec.low=buffer.low,isNegative&&(dec.high=dec.high.or(long_1$1.fromString("9223372036854775808")));buffer=Buffer$3.alloc(16),index=0;return buffer[index++]=255&dec.low.low,buffer[index++]=dec.low.low>>8&255,buffer[index++]=dec.low.low>>16&255,buffer[index++]=dec.low.low>>24&255,buffer[index++]=255&dec.low.high,buffer[index++]=dec.low.high>>8&255,buffer[index++]=dec.low.high>>16&255,buffer[index++]=dec.low.high>>24&255,buffer[index++]=255&dec.high.low,buffer[index++]=dec.high.low>>8&255,buffer[index++]=dec.high.low>>16&255,buffer[index++]=dec.high.low>>24&255,buffer[index++]=255&dec.high.high,buffer[index++]=dec.high.high>>8&255,buffer[index++]=dec.high.high>>16&255,buffer[index++]=dec.high.high>>24&255,new Decimal128(buffer)};var COMBINATION_MASK=31,EXPONENT_MASK=16383,COMBINATION_INFINITY=30,COMBINATION_NAN=31;Decimal128.prototype.toString=function(){for(var significand_digits=0,significand=new Array(36),i=0;i<significand.length;i++)significand[i]=0;var exponent,significand_msb,j,k,index=0,scientific_exponent=!1,significand128={parts:new Array(4)},string=[],index=0,combination=this.bytes,low=combination[index++]|combination[index++]<<8|combination[index++]<<16|combination[index++]<<24,midl=combination[index++]|combination[index++]<<8|combination[index++]<<16|combination[index++]<<24,midh=combination[index++]|combination[index++]<<8|combination[index++]<<16|combination[index++]<<24,high=combination[index++]|combination[index++]<<8|combination[index++]<<16|combination[index++]<<24;if(index=0,{low:new long_1$1(low,midl),high:new long_1$1(midh,high)}.high.lessThan(long_1$1.ZERO)&&string.push("-"),(combination=high>>26&COMBINATION_MASK)>>3==3){if(combination===COMBINATION_INFINITY)return string.join("")+"Infinity";if(combination===COMBINATION_NAN)return"NaN";exponent=high>>15&EXPONENT_MASK,significand_msb=8+(high>>14&1)}else significand_msb=high>>14&7,exponent=high>>17&EXPONENT_MASK;if(exponent=exponent-EXPONENT_BIAS,significand128.parts[0]=(16383&high)+((15&significand_msb)<<14),significand128.parts[1]=midh,significand128.parts[2]=midl,significand128.parts[3]=low,0===significand128.parts[0]&&0===significand128.parts[1]&&0===significand128.parts[2]&&0===significand128.parts[3])scientific_exponent=!0;else for(k=3;0<=k;k--){var least_digits=0,result=divideu128(significand128),significand128=result.quotient;if(least_digits=result.rem.low)for(j=8;0<=j;j--)significand[9*k+j]=least_digits%10,least_digits=Math.floor(least_digits/10)}if(scientific_exponent)significand_digits=1,significand[index]=0;else for(significand_digits=36;!significand[index];)--significand_digits,index+=1;if(34<=(scientific_exponent=significand_digits-1+exponent)||scientific_exponent<=-7||0<exponent){if(34<significand_digits)return string.push(0),0<exponent?string.push("E+"+exponent):exponent<0&&string.push("E"+exponent),string.join("");string.push(significand[index++]),--significand_digits&&string.push(".");for(var _i=0;_i<significand_digits;_i++)string.push(significand[index++]);string.push("E"),0<scientific_exponent?string.push("+"+scientific_exponent):string.push(scientific_exponent)}else if(0<=exponent)for(var _i2=0;_i2<significand_digits;_i2++)string.push(significand[index++]);else{var radix_position=significand_digits+exponent;if(0<radix_position)for(var _i3=0;_i3<radix_position;_i3++)string.push(significand[index++]);else string.push("0");for(string.push(".");radix_position++<0;)string.push("0");for(var _i4=0;_i4<significand_digits-Math.max(radix_position-1,0);_i4++)string.push(significand[index++])}return string.join("")},Decimal128.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},Decimal128.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},Decimal128.fromExtendedJSON=function(doc){return Decimal128.fromString(doc.$numberDecimal)},Object.defineProperty(Decimal128.prototype,"_bsontype",{value:"Decimal128"});var decimal128=Decimal128;function _classCallCheck$7(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass$7(Constructor,protoProps,staticProps){return protoProps&&_defineProperties$7(Constructor.prototype,protoProps),staticProps&&_defineProperties$7(Constructor,staticProps),Constructor}var MinKey=function(){function MinKey(){_classCallCheck$7(this,MinKey)}return _createClass$7(MinKey,[{key:"toExtendedJSON",value:function(){return{$minKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new MinKey}}]),MinKey}();Object.defineProperty(MinKey.prototype,"_bsontype",{value:"MinKey"});var min_key=MinKey;function _classCallCheck$8(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties$8(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass$8(Constructor,protoProps,staticProps){return protoProps&&_defineProperties$8(Constructor.prototype,protoProps),staticProps&&_defineProperties$8(Constructor,staticProps),Constructor}var MaxKey=function(){function MaxKey(){_classCallCheck$8(this,MaxKey)}return _createClass$8(MaxKey,[{key:"toExtendedJSON",value:function(){return{$maxKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new MaxKey}}]),MaxKey}();Object.defineProperty(MaxKey.prototype,"_bsontype",{value:"MaxKey"});var max_key=MaxKey;function _classCallCheck$9(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties$9(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass$9(Constructor,protoProps,staticProps){return protoProps&&_defineProperties$9(Constructor.prototype,protoProps),staticProps&&_defineProperties$9(Constructor,staticProps),Constructor}var DBRef=function(){function DBRef(collection,oid,db,fields){_classCallCheck$9(this,DBRef);var parts=collection.split(".");2===parts.length&&(db=parts.shift(),collection=parts.shift()),this.collection=collection,this.oid=oid,this.db=db,this.fields=fields||{}}return _createClass$9(DBRef,[{key:"toJSON",value:function(){var o=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(o.$db=this.db),o}},{key:"toExtendedJSON",value:function(options){options=options||{};var o={$ref:this.collection,$id:this.oid};return options.legacy?o:(this.db&&(o.$db=this.db),o=Object.assign(o,this.fields))}}],[{key:"fromExtendedJSON",value:function(doc){var copy=Object.assign({},doc);return["$ref","$id","$db"].forEach(function(k){return delete copy[k]}),new DBRef(doc.$ref,doc.$id,doc.$db,copy)}}]),DBRef}();Object.defineProperty(DBRef.prototype,"_bsontype",{value:"DBRef"}),Object.defineProperty(DBRef.prototype,"namespace",{get:function(){return this.collection},set:function(val){this.collection=val},configurable:!1});var db_ref=DBRef;function _classCallCheck$a(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties$a(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass$a(Constructor,protoProps,staticProps){return protoProps&&_defineProperties$a(Constructor.prototype,protoProps),staticProps&&_defineProperties$a(Constructor,staticProps),Constructor}var Buffer$4=bufferEs6.Buffer,Binary=function(){function Binary(buffer,subType){if(_classCallCheck$a(this,Binary),!(null==buffer||"string"==typeof buffer||Buffer$4.isBuffer(buffer)||buffer instanceof Uint8Array||Array.isArray(buffer)))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");if(this.sub_type=null==subType?BSON_BINARY_SUBTYPE_DEFAULT:subType,this.position=0,null==buffer||buffer instanceof Number)void 0!==Buffer$4?this.buffer=Buffer$4.alloc(Binary.BUFFER_SIZE):"undefined"!=typeof Uint8Array?this.buffer=new Uint8Array(new ArrayBuffer(Binary.BUFFER_SIZE)):this.buffer=new Array(Binary.BUFFER_SIZE);else{if("string"==typeof buffer)if(void 0!==Buffer$4)this.buffer=Buffer$4.from(buffer);else{if("undefined"==typeof Uint8Array&&!Array.isArray(buffer))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");this.buffer=writeStringToArray(buffer)}else this.buffer=buffer;this.position=buffer.length}}return _createClass$a(Binary,[{key:"put",value:function(buffer){if(null!=buffer.length&&"number"!=typeof buffer&&1!==buffer.length)throw new TypeError("only accepts single character String, Uint8Array or Array");if("number"!=typeof buffer&&buffer<0||255<buffer)throw new TypeError("only accepts number in a valid unsigned byte range 0-255");var decoded_byte=null,decoded_byte="string"==typeof buffer?buffer.charCodeAt(0):null!=buffer.length?buffer[0]:buffer;if(this.buffer.length>this.position)this.buffer[this.position++]=decoded_byte;else if(void 0!==Buffer$4&&Buffer$4.isBuffer(this.buffer)){buffer=Buffer$4.alloc(Binary.BUFFER_SIZE+this.buffer.length);this.buffer.copy(buffer,0,0,this.buffer.length),this.buffer=buffer,this.buffer[this.position++]=decoded_byte}else{for(var _buffer=null,_buffer=isUint8Array(this.buffer)?new Uint8Array(new ArrayBuffer(Binary.BUFFER_SIZE+this.buffer.length)):new Array(Binary.BUFFER_SIZE+this.buffer.length),i=0;i<this.buffer.length;i++)_buffer[i]=this.buffer[i];this.buffer=_buffer,this.buffer[this.position++]=decoded_byte}}},{key:"write",value:function(string,offset){if(offset="number"==typeof offset?offset:this.position,this.buffer.length<offset+string.length){var buffer=null;if(void 0!==Buffer$4&&Buffer$4.isBuffer(this.buffer))buffer=Buffer$4.alloc(this.buffer.length+string.length),this.buffer.copy(buffer,0,0,this.buffer.length);else if(isUint8Array(this.buffer)){buffer=new Uint8Array(new ArrayBuffer(this.buffer.length+string.length));for(var i=0;i<this.position;i++)buffer[i]=this.buffer[i]}this.buffer=buffer}if(void 0!==Buffer$4&&Buffer$4.isBuffer(string)&&Buffer$4.isBuffer(this.buffer))string.copy(this.buffer,offset,0,string.length),this.position=offset+string.length>this.position?offset+string.length:this.position;else if(void 0!==Buffer$4&&"string"==typeof string&&Buffer$4.isBuffer(this.buffer))this.buffer.write(string,offset,"binary"),this.position=offset+string.length>this.position?offset+string.length:this.position;else if(isUint8Array(string)||Array.isArray(string)&&"string"!=typeof string){for(var _i=0;_i<string.length;_i++)this.buffer[offset++]=string[_i];this.position=offset>this.position?offset:this.position}else if("string"==typeof string){for(var _i2=0;_i2<string.length;_i2++)this.buffer[offset++]=string.charCodeAt(_i2);this.position=offset>this.position?offset:this.position}}},{key:"read",value:function(position,length){if(length=length&&0<length?length:this.position,this.buffer.slice)return this.buffer.slice(position,position+length);for(var buffer="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(length)):new Array(length),i=0;i<length;i++)buffer[i]=this.buffer[position++];return buffer}},{key:"value",value:function(asRaw){if((asRaw=null!=asRaw&&asRaw)&&void 0!==Buffer$4&&Buffer$4.isBuffer(this.buffer)&&this.buffer.length===this.position)return this.buffer;if(void 0!==Buffer$4&&Buffer$4.isBuffer(this.buffer))return asRaw?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position);if(asRaw){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var newBuffer=isUint8Array(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),i=0;i<this.position;i++)newBuffer[i]=this.buffer[i];return newBuffer}return convertArraytoUtf8BinaryString(this.buffer,0,this.position)}},{key:"length",value:function(){return this.position}},{key:"toJSON",value:function(){return null!=this.buffer?this.buffer.toString("base64"):""}},{key:"toString",value:function(format){return null!=this.buffer?this.buffer.slice(0,this.position).toString(format):""}},{key:"toExtendedJSON",value:function(options){options=options||{};var base64String=(Buffer$4.isBuffer(this.buffer)?this.buffer:Buffer$4.from(this.buffer)).toString("base64"),subType=Number(this.sub_type).toString(16);return options.legacy?{$binary:base64String,$type:1===subType.length?"0"+subType:subType}:{$binary:{base64:base64String,subType:1===subType.length?"0"+subType:subType}}}}],[{key:"fromExtendedJSON",value:function(doc,options){var type;return new Binary((options=options||{}).legacy?(type=doc.$type?parseInt(doc.$type,16):0,Buffer$4.from(doc.$binary,"base64")):(type=doc.$binary.subType?parseInt(doc.$binary.subType,16):0,Buffer$4.from(doc.$binary.base64,"base64")),type)}}]),Binary}(),BSON_BINARY_SUBTYPE_DEFAULT=0;function isUint8Array(obj){return"[object Uint8Array]"===Object.prototype.toString.call(obj)}function writeStringToArray(data){for(var buffer="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(data.length)):new Array(data.length),i=0;i<data.length;i++)buffer[i]=data.charCodeAt(i);return buffer}function convertArraytoUtf8BinaryString(byteArray,startIndex,endIndex){for(var result="",i=startIndex;i<endIndex;i++)result+=String.fromCharCode(byteArray[i]);return result}Binary.BUFFER_SIZE=256,Binary.SUBTYPE_DEFAULT=0,Binary.SUBTYPE_FUNCTION=1,Binary.SUBTYPE_BYTE_ARRAY=2,Binary.SUBTYPE_UUID_OLD=3,Binary.SUBTYPE_UUID=4,Binary.SUBTYPE_MD5=5,Binary.SUBTYPE_USER_DEFINED=128,Object.defineProperty(Binary.prototype,"_bsontype",{value:"Binary"});var binary=Binary,constants={BSON_INT32_MAX:2147483647,BSON_INT32_MIN:-2147483648,BSON_INT64_MAX:Math.pow(2,63)-1,BSON_INT64_MIN:-Math.pow(2,63),JS_INT_MAX:9007199254740992,JS_INT_MIN:-9007199254740992,BSON_DATA_NUMBER:1,BSON_DATA_STRING:2,BSON_DATA_OBJECT:3,BSON_DATA_ARRAY:4,BSON_DATA_BINARY:5,BSON_DATA_UNDEFINED:6,BSON_DATA_OID:7,BSON_DATA_BOOLEAN:8,BSON_DATA_DATE:9,BSON_DATA_NULL:10,BSON_DATA_REGEXP:11,BSON_DATA_DBPOINTER:12,BSON_DATA_CODE:13,BSON_DATA_SYMBOL:14,BSON_DATA_CODE_W_SCOPE:15,BSON_DATA_INT:16,BSON_DATA_TIMESTAMP:17,BSON_DATA_LONG:18,BSON_DATA_DECIMAL128:19,BSON_DATA_MIN_KEY:255,BSON_DATA_MAX_KEY:127,BSON_BINARY_SUBTYPE_DEFAULT:0,BSON_BINARY_SUBTYPE_FUNCTION:1,BSON_BINARY_SUBTYPE_BYTE_ARRAY:2,BSON_BINARY_SUBTYPE_UUID:3,BSON_BINARY_SUBTYPE_MD5:4,BSON_BINARY_SUBTYPE_USER_DEFINED:128};function _typeof$2(obj){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var keysToCodecs={$oid:objectid,$binary:binary,$symbol:symbol,$numberInt:int_32,$numberDecimal:decimal128,$numberDouble:double_1,$numberLong:long_1$1,$minKey:min_key,$maxKey:max_key,$regex:regexp,$regularExpression:regexp,$timestamp:timestamp};function deserializeValue(dollarKeys,key,value,options){if("number"==typeof value){if(options.relaxed||options.legacy)return value;if(Math.floor(value)===value){if(BSON_INT32_MIN<=value&&value<=BSON_INT32_MAX)return new int_32(value);if(BSON_INT64_MIN<=value&&value<=BSON_INT64_MAX)return new long_1$1.fromNumber(value)}return new double_1(value)}if(null==value||"object"!==_typeof$2(value))return value;if(value.$undefined)return null;for(var keys=Object.keys(value).filter(function(k){return k.startsWith("$")&&null!=value[k]}),i=0;i<keys.length;i++){var c=keysToCodecs[keys[i]];if(c)return c.fromExtendedJSON(value,options)}if(null!=value.$date){var d=value.$date,date=new Date;return options.legacy?"number"==typeof d?date.setTime(d):"string"==typeof d&&date.setTime(Date.parse(d)):"string"==typeof d?date.setTime(Date.parse(d)):long_1$1.isLong(d)?date.setTime(d.toNumber()):"number"==typeof d&&options.relaxed&&date.setTime(d),date}if(null!=value.$code){var v=Object.assign({},value);return value.$scope&&(v.$scope=deserializeValue(dollarKeys,null,value.$scope)),code.fromExtendedJSON(value)}if(null!=value.$ref||null!=value.$dbPointer){v=value.$ref?value:value.$dbPointer;if(v instanceof db_ref)return v;var dollarKeys=Object.keys(v).filter(function(k){return k.startsWith("$")}),valid=!0;if(dollarKeys.forEach(function(k){-1===["$ref","$id","$db"].indexOf(k)&&(valid=!1)}),valid)return db_ref.fromExtendedJSON(v)}return value}function parse(text,options){var _this=this;return"boolean"==typeof(options=Object.assign({},{relaxed:!0,legacy:!1},options)).relaxed&&(options.strict=!options.relaxed),"boolean"==typeof options.strict&&(options.relaxed=!options.strict),JSON.parse(text,function(key,value){return deserializeValue(_this,key,value,options)})}var BSON_INT32_MAX=2147483647,BSON_INT32_MIN=-2147483648,BSON_INT64_MAX=0x8000000000000000,BSON_INT64_MIN=-0x8000000000000000;function stringify(value,replacer,space,doc){null!=space&&"object"===_typeof$2(space)&&(doc=space,space=0),null==replacer||"object"!==_typeof$2(replacer)||Array.isArray(replacer)||(doc=replacer,replacer=null,space=0),doc=Object.assign({},{relaxed:!0,legacy:!1},doc);doc=(Array.isArray(value)?serializeArray:serializeDocument)(value,doc);return JSON.stringify(doc,replacer,space)}function serialize(bson,options){return options=options||{},JSON.parse(stringify(bson,options))}function deserialize(ejson,options){return options=options||{},parse(JSON.stringify(ejson),options)}function serializeArray(array,options){return array.map(function(v){return serializeValue(v,options)})}function getISOString(date){var isoStr=date.toISOString();return 0!==date.getUTCMilliseconds()?isoStr:isoStr.slice(0,-5)+"Z"}function serializeValue(value,options){if(Array.isArray(value))return serializeArray(value,options);if(void 0===value)return null;if(value instanceof Date){var inRange=value.getTime(),inRange=-1<inRange&&inRange<2534023188e5;return options.legacy?options.relaxed&&inRange?{$date:value.getTime()}:{$date:getISOString(value)}:options.relaxed&&inRange?{$date:getISOString(value)}:{$date:{$numberLong:value.getTime().toString()}}}if("number"==typeof value&&!options.relaxed){if(Math.floor(value)===value){var flags=BSON_INT64_MIN<=value&&value<=BSON_INT64_MAX;if(BSON_INT32_MIN<=value&&value<=BSON_INT32_MAX)return{$numberInt:value.toString()};if(flags)return{$numberLong:value.toString()}}return{$numberDouble:value.toString()}}if(value instanceof RegExp){flags=value.flags;return void 0===flags&&(flags=value.toString().match(/[gimuy]*$/)[0]),new regexp(value.source,flags).toExtendedJSON(options)}return null!=value&&"object"===_typeof$2(value)?serializeDocument(value,options):value}var BSON_TYPE_MAPPINGS={Binary:function(o){return new binary(o.value(),o.subtype)},Code:function(o){return new code(o.code,o.scope)},DBRef:function(o){return new db_ref(o.collection||o.namespace,o.oid,o.db,o.fields)},Decimal128:function(o){return new decimal128(o.bytes)},Double:function(o){return new double_1(o.value)},Int32:function(o){return new int_32(o.value)},Long:function(o){return long_1$1.fromBits(null!=o.low?o.low:o.low_,null!=o.low?o.high:o.high_,null!=o.low?o.unsigned:o.unsigned_)},MaxKey:function(){return new max_key},MinKey:function(){return new min_key},ObjectID:function(o){return new objectid(o)},ObjectId:function(o){return new objectid(o)},BSONRegExp:function(o){return new regexp(o.pattern,o.options)},Symbol:function(o){return new symbol(o.value)},Timestamp:function(o){return timestamp.fromBits(o.low,o.high)}};function serializeDocument(doc,options){if(null==doc||"object"!==_typeof$2(doc))throw new Error("not an object instance");var bsontype=doc._bsontype;if(void 0===bsontype){var name,_doc={};for(name in doc)_doc[name]=serializeValue(doc[name],options);return _doc}if("string"!=typeof bsontype)throw new Error("_bsontype must be a string, but was: "+_typeof$2(bsontype));var _doc2=doc;if("function"!=typeof _doc2.toExtendedJSON){var mapper=BSON_TYPE_MAPPINGS[bsontype];if(!mapper)throw new TypeError("Unrecognized or invalid _bsontype: "+bsontype);_doc2=mapper(_doc2)}return"Code"===bsontype&&_doc2.scope?_doc2=new code(_doc2.code,serializeValue(_doc2.scope,options)):"DBRef"===bsontype&&_doc2.oid&&(_doc2=new db_ref(_doc2.collection,serializeValue(_doc2.oid,options),_doc2.db,_doc2.fields)),_doc2.toExtendedJSON(options)}var extended_json={parse:parse,deserialize:deserialize,serialize:serialize,stringify:stringify},FIRST_BIT=128,FIRST_TWO_BITS=192,FIRST_THREE_BITS=224,FIRST_FOUR_BITS=240,FIRST_FIVE_BITS=248,TWO_BIT_CHAR=192,THREE_BIT_CHAR=224,FOUR_BIT_CHAR=240,CONTINUING_CHAR=128;function validateUtf8(bytes,start,end){for(var continuation=0,i=start;i<end;i+=1){var _byte=bytes[i];if(continuation){if((_byte&FIRST_TWO_BITS)!==CONTINUING_CHAR)return!1;--continuation}else if(_byte&FIRST_BIT)if((_byte&FIRST_THREE_BITS)===TWO_BIT_CHAR)continuation=1;else if((_byte&FIRST_FOUR_BITS)===THREE_BIT_CHAR)continuation=2;else{if((_byte&FIRST_FIVE_BITS)!==FOUR_BIT_CHAR)return!1;continuation=3}}return!continuation}var validateUtf8_1=validateUtf8,validate_utf8={validateUtf8:validateUtf8_1},Buffer$5=bufferEs6.Buffer,validateUtf8$1=validate_utf8.validateUtf8,JS_INT_MAX_LONG=long_1$1.fromNumber(constants.JS_INT_MAX),JS_INT_MIN_LONG=long_1$1.fromNumber(constants.JS_INT_MIN),functionCache={};function deserialize$1(buffer,options,isArray){var index=(options=null==options?{}:options)&&options.index?options.index:0,size=buffer[index]|buffer[index+1]<<8|buffer[index+2]<<16|buffer[index+3]<<24;if(size<5)throw new Error("bson size must be >= 5, is ".concat(size));if(options.allowObjectSmallerThanBufferSize&&buffer.length<size)throw new Error("buffer length ".concat(buffer.length," must be >= bson size ").concat(size));if(!options.allowObjectSmallerThanBufferSize&&buffer.length!==size)throw new Error("buffer length ".concat(buffer.length," must === bson size ").concat(size));if(size+index>buffer.length)throw new Error("(bson size ".concat(size," + options.index ").concat(index," must be <= buffer length ").concat(Buffer$5.byteLength(buffer),")"));if(0!==buffer[index+size-1])throw new Error("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return deserializeObject(buffer,index,options,isArray)}function deserializeObject(buffer,index,options,isArray){var crc32,evalFunctions=null!=options.evalFunctions&&options.evalFunctions,cacheFunctions=null!=options.cacheFunctions&&options.cacheFunctions,cacheFunctionsCrc32=null!=options.cacheFunctionsCrc32&&options.cacheFunctionsCrc32;cacheFunctionsCrc32||(crc32=null);var fieldsAsRaw=null==options.fieldsAsRaw?null:options.fieldsAsRaw,raw=null!=options.raw&&options.raw,bsonRegExp="boolean"==typeof options.bsonRegExp&&options.bsonRegExp,promoteBuffers=null!=options.promoteBuffers&&options.promoteBuffers,promoteLongs=null==options.promoteLongs||options.promoteLongs,promoteValues=null==options.promoteValues||options.promoteValues,copy=index;if(buffer.length<5)throw new Error("corrupt bson message < 5 bytes long");var size=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;if(size<5||size>buffer.length)throw new Error("corrupt bson message");for(var object=isArray?[]:{},arrayIndex=0;;){var namespace=buffer[index++];if(0===namespace)break;for(var i=index;0!==buffer[i]&&i<buffer.length;)i++;if(i>=Buffer$5.byteLength(buffer))throw new Error("Bad BSON Document: illegal CString");var name=isArray?arrayIndex++:buffer.toString("utf8",index,i);if(index=i+1,namespace===constants.BSON_DATA_STRING){var stringSize=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;if(stringSize<=0||stringSize>buffer.length-index||0!==buffer[index+stringSize-1])throw new Error("bad string length in bson");if(!validateUtf8$1(buffer,index,index+stringSize-1))throw new Error("Invalid UTF-8 string in BSON document");var s=buffer.toString("utf8",index,index+stringSize-1);object[name]=s,index+=stringSize}else if(namespace===constants.BSON_DATA_OID){var lowBits=Buffer$5.alloc(12);buffer.copy(lowBits,0,index,index+12),object[name]=new objectid(lowBits),index+=12}else if(namespace===constants.BSON_DATA_INT&&!1===promoteValues)object[name]=new int_32(buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24);else if(namespace===constants.BSON_DATA_INT)object[name]=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;else if(namespace===constants.BSON_DATA_NUMBER&&!1===promoteValues)object[name]=new double_1(buffer.readDoubleLE(index)),index+=8;else if(namespace===constants.BSON_DATA_NUMBER)object[name]=buffer.readDoubleLE(index),index+=8;else if(namespace===constants.BSON_DATA_DATE){var lowBits=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24,_index=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;object[name]=new Date(new long_1$1(lowBits,_index).toNumber())}else if(namespace===constants.BSON_DATA_BOOLEAN){if(0!==buffer[index]&&1!==buffer[index])throw new Error("illegal boolean type value");object[name]=1===buffer[index++]}else if(namespace===constants.BSON_DATA_OBJECT){var _index=index,_index2=buffer[index]|buffer[index+1]<<8|buffer[index+2]<<16|buffer[index+3]<<24;if(_index2<=0||_index2>buffer.length-index)throw new Error("bad embedded document length in bson");object[name]=raw?buffer.slice(index,index+_index2):deserializeObject(buffer,_index,options,!1),index+=_index2}else if(namespace===constants.BSON_DATA_ARRAY){var _index2=index,_lowBits=buffer[index]|buffer[index+1]<<8|buffer[index+2]<<16|buffer[index+3]<<24,arrayOptions=options,_long=index+_lowBits;if(fieldsAsRaw&&fieldsAsRaw[name]){for(var n in arrayOptions={},options)arrayOptions[n]=options[n];arrayOptions.raw=!0}if(object[name]=deserializeObject(buffer,_index2,arrayOptions,!0),0!==buffer[(index+=_lowBits)-1])throw new Error("invalid array terminator byte");if(index!==_long)throw new Error("corrupted array bson")}else if(namespace===constants.BSON_DATA_UNDEFINED)object[name]=void 0;else if(namespace===constants.BSON_DATA_NULL)object[name]=null;else if(namespace===constants.BSON_DATA_LONG){_lowBits=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24,_long=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24,_long=new long_1$1(_lowBits,_long);object[name]=promoteLongs&&!0===promoteValues&&_long.lessThanOrEqual(JS_INT_MAX_LONG)&&_long.greaterThanOrEqual(JS_INT_MIN_LONG)?_long.toNumber():_long}else if(namespace===constants.BSON_DATA_DECIMAL128){var totalBinarySize=Buffer$5.alloc(16);buffer.copy(totalBinarySize,0,index,index+16),index+=16;var subType=new decimal128(totalBinarySize);object[name]=subType.toObject?subType.toObject():subType}else if(namespace===constants.BSON_DATA_BINARY){var binarySize=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24,totalBinarySize=binarySize,subType=buffer[index++];if(binarySize<0)throw new Error("Negative binary type element size found");if(binarySize>Buffer$5.byteLength(buffer))throw new Error("Binary type size larger than document size");if(null!=buffer.slice){if(subType===binary.SUBTYPE_BYTE_ARRAY){if((binarySize=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(totalBinarySize-4<binarySize)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(binarySize<totalBinarySize-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}object[name]=promoteBuffers&&promoteValues?buffer.slice(index,index+binarySize):new binary(buffer.slice(index,index+binarySize),subType)}else{var _buffer="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(binarySize)):new Array(binarySize);if(subType===binary.SUBTYPE_BYTE_ARRAY){if((binarySize=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(totalBinarySize-4<binarySize)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(binarySize<totalBinarySize-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}for(i=0;i<binarySize;i++)_buffer[i]=buffer[index+i];object[name]=promoteBuffers&&promoteValues?_buffer:new binary(_buffer,subType)}index+=binarySize}else if(namespace===constants.BSON_DATA_REGEXP&&!1===bsonRegExp){for(i=index;0!==buffer[i]&&i<buffer.length;)i++;if(i>=buffer.length)throw new Error("Bad BSON Document: illegal CString");var _source=buffer.toString("utf8",index,i);for(i=index=i+1;0!==buffer[i]&&i<buffer.length;)i++;if(i>=buffer.length)throw new Error("Bad BSON Document: illegal CString");var regExpOptions=buffer.toString("utf8",index,i);index=i+1;for(var optionsArray=new Array(regExpOptions.length),i=0;i<regExpOptions.length;i++)switch(regExpOptions[i]){case"m":optionsArray[i]="m";break;case"s":optionsArray[i]="g";break;case"i":optionsArray[i]="i"}object[name]=new RegExp(_source,optionsArray.join(""))}else if(namespace===constants.BSON_DATA_REGEXP&&!0===bsonRegExp){for(i=index;0!==buffer[i]&&i<buffer.length;)i++;if(i>=buffer.length)throw new Error("Bad BSON Document: illegal CString");_source=buffer.toString("utf8",index,i);for(i=index=i+1;0!==buffer[i]&&i<buffer.length;)i++;if(i>=buffer.length)throw new Error("Bad BSON Document: illegal CString");var symbol$$1=buffer.toString("utf8",index,i);index=i+1,object[name]=new regexp(_source,symbol$$1)}else if(namespace===constants.BSON_DATA_SYMBOL){var _lowBits2=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;if(_lowBits2<=0||_lowBits2>buffer.length-index||0!==buffer[index+_lowBits2-1])throw new Error("bad string length in bson");symbol$$1=buffer.toString("utf8",index,index+_lowBits2-1);object[name]=promoteValues?symbol$$1:new symbol(symbol$$1),index+=_lowBits2}else if(namespace===constants.BSON_DATA_TIMESTAMP){var _lowBits2=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24,_hash=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;object[name]=new timestamp(_lowBits2,_hash)}else if(namespace===constants.BSON_DATA_MIN_KEY)object[name]=new min_key;else if(namespace===constants.BSON_DATA_MAX_KEY)object[name]=new max_key;else if(namespace===constants.BSON_DATA_CODE){var _objectSize2=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;if(_objectSize2<=0||_objectSize2>buffer.length-index||0!==buffer[index+_objectSize2-1])throw new Error("bad string length in bson");var _functionString=buffer.toString("utf8",index,index+_objectSize2-1);evalFunctions?cacheFunctions?(_stringSize3=cacheFunctionsCrc32?crc32(_functionString):_functionString,object[name]=isolateEvalWithHash(functionCache,_stringSize3,_functionString,object)):object[name]=isolateEval(_functionString):object[name]=new code(_functionString),index+=_objectSize2}else if(namespace===constants.BSON_DATA_CODE_W_SCOPE){_hash=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;if(_hash<13)throw new Error("code_w_scope total size shorter minimum expected length");var _stringSize3=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;if(_stringSize3<=0||_stringSize3>buffer.length-index||0!==buffer[index+_stringSize3-1])throw new Error("bad string length in bson");var _functionString=buffer.toString("utf8",index,index+_stringSize3-1),_objectSize2=buffer[index+=_stringSize3]|buffer[index+1]<<8|buffer[index+2]<<16|buffer[index+3]<<24,_oid=deserializeObject(buffer,index,options,!1);if(index+=_objectSize2,_hash<8+_objectSize2+_stringSize3)throw new Error("code_w_scope total size is to short, truncating scope");if(8+_objectSize2+_stringSize3<_hash)throw new Error("code_w_scope total size is to long, clips outer document");evalFunctions?(cacheFunctions?(_hash=cacheFunctionsCrc32?crc32(_functionString):_functionString,object[name]=isolateEvalWithHash(functionCache,_hash,_functionString,object)):object[name]=isolateEval(_functionString),object[name].scope=_oid):object[name]=new code(_functionString,_oid)}else{if(namespace!==constants.BSON_DATA_DBPOINTER)throw new Error("Detected unknown BSON type "+namespace.toString(16)+' for fieldname "'+name+'", are you using the latest BSON parser?');_oid=buffer[index++]|buffer[index++]<<8|buffer[index++]<<16|buffer[index++]<<24;if(_oid<=0||_oid>buffer.length-index||0!==buffer[index+_oid-1])throw new Error("bad string length in bson");if(!validateUtf8$1(buffer,index,index+_oid-1))throw new Error("Invalid UTF-8 string in BSON document");namespace=buffer.toString("utf8",index,index+_oid-1);index+=_oid;_oid=Buffer$5.alloc(12);buffer.copy(_oid,0,index,index+12);_oid=new objectid(_oid);index+=12,object[name]=new db_ref(namespace,_oid)}}if(size!=index-copy){if(isArray)throw new Error("corrupt array bson");throw new Error("corrupt object bson")}var copy=Object.keys(object).filter(function(k){return k.startsWith("$")}),valid=!0;if(copy.forEach(function(k){-1===["$ref","$id","$db"].indexOf(k)&&(valid=!1)}),!valid)return object;if(null==object.$id||null==object.$ref)return object;copy=Object.assign({},object);return delete copy.$ref,delete copy.$id,delete copy.$db,new db_ref(object.$ref,object.$id,object.$db||null,copy)}function isolateEvalWithHash(functionCache,hash,functionString,object){var value=null;return null==functionCache[hash]&&(eval("value = "+functionString),functionCache[hash]=value),functionCache[hash].bind(object)}function isolateEval(functionString){var value=null;return eval("value = "+functionString),value}var deserializer=deserialize$1;function readIEEE754(buffer,offset,eBias,mLen,nBytes){var e,m,s="big"===eBias,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=s?0:nBytes-1,d=s?1:-1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;0<nBits;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;0<nBits;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)}function writeIEEE754(buffer,value,offset,rt,mLen,s){var e,m,c="big"===rt,eLen=8*s-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=c?s-1:0,d=c?-1:1,s=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),2<=(value+=1<=e+eBias?rt/c:rt*Math.pow(2,1-eBias))*c&&(e++,c/=2),eMax<=e+eBias?(m=0,e=eMax):1<=e+eBias?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0)),isNaN(value)&&(m=0);8<=mLen;)buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8;for(e=e<<mLen|m,isNaN(value)&&(e+=8),eLen+=mLen;0<eLen;)buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8;buffer[offset+i-d]|=128*s}var float_parser={readIEEE754:readIEEE754,writeIEEE754:writeIEEE754};function _typeof$3(obj){return(_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var Buffer$6=bufferEs6.Buffer,writeIEEE754$1=float_parser.writeIEEE754,normalizedFunctionString$1=utils.normalizedFunctionString,regexp$1=/\x00/,ignoreKeys=new Set(["$db","$ref","$id","$clusterTime"]),isDate$1=function(d){return"object"===_typeof$3(d)&&"[object Date]"===Object.prototype.toString.call(d)},isRegExp$1=function(d){return"[object RegExp]"===Object.prototype.toString.call(d)};function serializeString(buffer,numberOfWrittenBytes,size,index,isArray){buffer[index++]=constants.BSON_DATA_STRING;numberOfWrittenBytes=isArray?buffer.write(numberOfWrittenBytes,index,"ascii"):buffer.write(numberOfWrittenBytes,index,"utf8");buffer[(index=index+numberOfWrittenBytes+1)-1]=0;size=buffer.write(size,index+4,"utf8");return buffer[index+3]=size+1>>24&255,buffer[index+2]=size+1>>16&255,buffer[index+1]=size+1>>8&255,buffer[index]=size+1&255,index=index+4+size,buffer[index++]=0,index}function serializeNumber(buffer,key,value,index,isArray){var lowBits,highBits;return Math.floor(value)===value&&value>=constants.JS_INT_MIN&&value<=constants.JS_INT_MAX?value>=constants.BSON_INT32_MIN&&value<=constants.BSON_INT32_MAX?(buffer[index++]=constants.BSON_DATA_INT,index+=isArray?buffer.write(key,index,"ascii"):buffer.write(key,index,"utf8"),buffer[index++]=0,buffer[index++]=255&value,buffer[index++]=value>>8&255,buffer[index++]=value>>16&255,buffer[index++]=value>>24&255):value>=constants.JS_INT_MIN&&value<=constants.JS_INT_MAX?(buffer[index++]=constants.BSON_DATA_NUMBER,index+=isArray?buffer.write(key,index,"ascii"):buffer.write(key,index,"utf8"),buffer[index++]=0,writeIEEE754$1(buffer,value,index,"little",52,8),index+=8):(buffer[index++]=constants.BSON_DATA_LONG,index+=isArray?buffer.write(key,index,"ascii"):buffer.write(key,index,"utf8"),buffer[index++]=0,lowBits=(highBits=long_1$1.fromNumber(value)).getLowBits(),highBits=highBits.getHighBits(),buffer[index++]=255&lowBits,buffer[index++]=lowBits>>8&255,buffer[index++]=lowBits>>16&255,buffer[index++]=lowBits>>24&255,buffer[index++]=255&highBits,buffer[index++]=highBits>>8&255,buffer[index++]=highBits>>16&255,buffer[index++]=highBits>>24&255):(buffer[index++]=constants.BSON_DATA_NUMBER,index+=isArray?buffer.write(key,index,"ascii"):buffer.write(key,index,"utf8"),buffer[index++]=0,writeIEEE754$1(buffer,value,index,"little",52,8),index+=8),index}function serializeNull(buffer,key,value,index,isArray){return buffer[index++]=constants.BSON_DATA_NULL,index+=isArray?buffer.write(key,index,"ascii"):buffer.write(key,index,"utf8"),buffer[index++]=0,index}function serializeBoolean(buffer,key,value,index,isArray){return buffer[index++]=constants.BSON_DATA_BOOLEAN,index+=isArray?buffer.write(key,index,"ascii"):buffer.write(key,index,"utf8"),buffer[index++]=0,buffer[index++]=value?1:0,index}function serializeDate(buffer,highBits,lowBits,index,isArray){buffer[index++]=constants.BSON_DATA_DATE,index+=isArray?buffer.write(highBits,index,"ascii"):buffer.write(highBits,index,"utf8"),buffer[index++]=0;highBits=long_1$1.fromNumber(lowBits.getTime()),lowBits=highBits.getLowBits(),highBits=highBits.getHighBits();return buffer[index++]=255&lowBits,buffer[index++]=lowBits>>8&255,buffer[index++]=lowBits>>16&255,buffer[index++]=lowBits>>24&255,buffer[index++]=255&highBits,buffer[index++]=highBits>>8&255,buffer[index++]=highBits>>16&255,buffer[index++]=highBits>>24&255,index}function serializeRegExp(buffer,key,value,index,isArray){if(buffer[index++]=constants.BSON_DATA_REGEXP,index+=isArray?buffer.write(key,index,"ascii"):buffer.write(key,index,"utf8"),buffer[index++]=0,value.source&&null!=value.source.match(regexp$1))throw Error("value "+value.source+" must not contain null bytes");return index+=buffer.write(value.source,index,"utf8"),buffer[index++]=0,value.ignoreCase&&(buffer[index++]=105),value.global&&(buffer[index++]=115),value.multiline&&(buffer[index++]=109),buffer[index++]=0,index}function serializeBSONRegExp(buffer,key,value,index,isArray){if(buffer[index++]=constants.BSON_DATA_REGEXP,index+=isArray?buffer.write(key,index,"ascii"):buffer.write(key,index,"utf8"),buffer[index++]=0,null!=value.pattern.match(regexp$1))throw Error("pattern "+value.pattern+" must not contain null bytes");return index+=buffer.write(value.pattern,index,"utf8"),buffer[index++]=0,index+=buffer.write(value.options.split("").sort().join(""),index,"utf8"),buffer[index++]=0,index}function serializeMinMax(buffer,key,value,index,isArray){return null===value?buffer[index++]=constants.BSON_DATA_NULL:"MinKey"===value._bsontype?buffer[index++]=constants.BSON_DATA_MIN_KEY:buffer[index++]=constants.BSON_DATA_MAX_KEY,index+=isArray?buffer.write(key,index,"ascii"):buffer.write(key,index,"utf8"),buffer[index++]=0,index}function serializeObjectId(buffer,key,value,index,isArray){if(buffer[index++]=constants.BSON_DATA_OID,index+=isArray?buffer.write(key,index,"ascii"):buffer.write(key,index,"utf8"),buffer[index++]=0,"string"==typeof value.id)buffer.write(value.id,index,"binary");else{if(!value.id||!value.id.copy)throw new TypeError("object ["+JSON.stringify(value)+"] is not a valid ObjectId");value.id.copy(buffer,index,0,12)}return index+12}function serializeBuffer(buffer,size,value,index,isArray){buffer[index++]=constants.BSON_DATA_BINARY,index+=isArray?buffer.write(size,index,"ascii"):buffer.write(size,index,"utf8"),buffer[index++]=0;size=value.length;return buffer[index++]=255&size,buffer[index++]=size>>8&255,buffer[index++]=size>>16&255,buffer[index++]=size>>24&255,buffer[index++]=constants.BSON_BINARY_SUBTYPE_DEFAULT,value.copy(buffer,index,0,size),index+=size}function serializeObject(buffer,key,value,index,checkKeys,depth,serializeFunctions,endIndex,isArray,path){for(var i=0;i<path.length;i++)if(path[i]===value)throw new Error("cyclic dependency detected");path.push(value),buffer[index++]=Array.isArray(value)?constants.BSON_DATA_ARRAY:constants.BSON_DATA_OBJECT,index+=isArray?buffer.write(key,index,"ascii"):buffer.write(key,index,"utf8"),buffer[index++]=0;endIndex=serializeInto(buffer,value,checkKeys,index,depth+1,serializeFunctions,endIndex,path);return path.pop(),endIndex}function serializeDecimal128(buffer,key,value,index,isArray){return buffer[index++]=constants.BSON_DATA_DECIMAL128,index+=isArray?buffer.write(key,index,"ascii"):buffer.write(key,index,"utf8"),buffer[index++]=0,value.bytes.copy(buffer,index,0,16),index+16}function serializeLong(buffer,lowBits,highBits,index,isArray){buffer[index++]="Long"===highBits._bsontype?constants.BSON_DATA_LONG:constants.BSON_DATA_TIMESTAMP,index+=isArray?buffer.write(lowBits,index,"ascii"):buffer.write(lowBits,index,"utf8"),buffer[index++]=0;lowBits=highBits.getLowBits(),highBits=highBits.getHighBits();return buffer[index++]=255&lowBits,buffer[index++]=lowBits>>8&255,buffer[index++]=lowBits>>16&255,buffer[index++]=lowBits>>24&255,buffer[index++]=255&highBits,buffer[index++]=highBits>>8&255,buffer[index++]=highBits>>16&255,buffer[index++]=highBits>>24&255,index}function serializeInt32(buffer,key,value,index,isArray){return buffer[index++]=constants.BSON_DATA_INT,index+=isArray?buffer.write(key,index,"ascii"):buffer.write(key,index,"utf8"),buffer[index++]=0,buffer[index++]=255&value,buffer[index++]=value>>8&255,buffer[index++]=value>>16&255,buffer[index++]=value>>24&255,index}function serializeDouble(buffer,key,value,index,isArray){return buffer[index++]=constants.BSON_DATA_NUMBER,index+=isArray?buffer.write(key,index,"ascii"):buffer.write(key,index,"utf8"),buffer[index++]=0,writeIEEE754$1(buffer,value.value,index,"little",52,8),index+=8}function serializeFunction(buffer,key,size,index,checkKeys,depth,isArray){buffer[index++]=constants.BSON_DATA_CODE,index+=isArray?buffer.write(key,index,"ascii"):buffer.write(key,index,"utf8"),buffer[index++]=0;size=normalizedFunctionString$1(size),size=buffer.write(size,index+4,"utf8")+1;return buffer[index]=255&size,buffer[index+1]=size>>8&255,buffer[index+2]=size>>16&255,buffer[index+3]=size>>24&255,index=index+4+size-1,buffer[index++]=0,index}function serializeCode(buffer,key,size,index,checkKeys,depth,serializeFunctions,totalSize,isArray){var startIndex,codeSize;return size.scope&&"object"===_typeof$3(size.scope)?(buffer[index++]=constants.BSON_DATA_CODE_W_SCOPE,index+=isArray?buffer.write(key,index,"ascii"):buffer.write(key,index,"utf8"),buffer[index++]=0,startIndex=index,codeSize="string"==typeof size.code?size.code:size.code.toString(),index+=4,codeSize=buffer.write(codeSize,index+4,"utf8")+1,buffer[index]=255&codeSize,buffer[index+1]=codeSize>>8&255,buffer[index+2]=codeSize>>16&255,buffer[index+3]=codeSize>>24&255,buffer[index+4+codeSize-1]=0,index=index+codeSize+4,index=(totalSize=serializeInto(buffer,size.scope,checkKeys,index,depth+1,serializeFunctions,totalSize))-1,totalSize=totalSize-startIndex,buffer[startIndex++]=255&totalSize,buffer[startIndex++]=totalSize>>8&255,buffer[startIndex++]=totalSize>>16&255,buffer[startIndex++]=totalSize>>24&255):(buffer[index++]=constants.BSON_DATA_CODE,index+=isArray?buffer.write(key,index,"ascii"):buffer.write(key,index,"utf8"),buffer[index++]=0,size=size.code.toString(),size=buffer.write(size,index+4,"utf8")+1,buffer[index]=255&size,buffer[index+1]=size>>8&255,buffer[index+2]=size>>16&255,buffer[index+3]=size>>24&255,index=index+4+size-1),buffer[index++]=0,index}function serializeBinary(buffer,size,value,index,data){buffer[index++]=constants.BSON_DATA_BINARY,index+=data?buffer.write(size,index,"ascii"):buffer.write(size,index,"utf8"),buffer[index++]=0;data=value.value(!0),size=value.position;return value.sub_type===binary.SUBTYPE_BYTE_ARRAY&&(size+=4),buffer[index++]=255&size,buffer[index++]=size>>8&255,buffer[index++]=size>>16&255,buffer[index++]=size>>24&255,buffer[index++]=value.sub_type,value.sub_type===binary.SUBTYPE_BYTE_ARRAY&&(size-=4,buffer[index++]=255&size,buffer[index++]=size>>8&255,buffer[index++]=size>>16&255,buffer[index++]=size>>24&255),data.copy(buffer,index,0,value.position),index+=value.position}function serializeSymbol(buffer,key,size,index,isArray){buffer[index++]=constants.BSON_DATA_SYMBOL,index+=isArray?buffer.write(key,index,"ascii"):buffer.write(key,index,"utf8"),buffer[index++]=0;size=buffer.write(size.value,index+4,"utf8")+1;return buffer[index]=255&size,buffer[index+1]=size>>8&255,buffer[index+2]=size>>16&255,buffer[index+3]=size>>24&255,index=index+4+size-1,buffer[index++]=0,index}function serializeDBRef(buffer,output,value,index,endIndex,size,startIndex){buffer[index++]=constants.BSON_DATA_OBJECT,index+=startIndex?buffer.write(output,index,"ascii"):buffer.write(output,index,"utf8"),buffer[index++]=0;startIndex=index,output={$ref:value.collection||value.namespace,$id:value.oid};null!=value.db&&(output.$db=value.db);size=(endIndex=serializeInto(buffer,output=Object.assign(output,value.fields),!1,index,endIndex+1,size))-startIndex;return buffer[startIndex++]=255&size,buffer[startIndex++]=size>>8&255,buffer[startIndex++]=size>>16&255,buffer[startIndex++]=size>>24&255,endIndex}function serializeInto(buffer,object,checkKeys,startingIndex,depth,serializeFunctions,ignoreUndefined,path){startingIndex=startingIndex||0,(path=path||[]).push(object);var index=startingIndex+4;if(Array.isArray(object))for(var i=0;i<object.length;i++){var key=""+i,value=object[i];if(value&&value.toBSON){if("function"!=typeof value.toBSON)throw new TypeError("toBSON is not a function");value=value.toBSON()}var type=_typeof$3(value);if("string"===type)index=serializeString(buffer,key,value,index,!0);else if("number"===type)index=serializeNumber(buffer,key,value,index,!0);else if("boolean"===type)index=serializeBoolean(buffer,key,value,index,!0);else if(value instanceof Date||isDate$1(value))index=serializeDate(buffer,key,value,index,!0);else if(void 0===value)index=serializeNull(buffer,key,value,index,!0);else if(null===value)index=serializeNull(buffer,key,value,index,!0);else if("ObjectId"===value._bsontype||"ObjectID"===value._bsontype)index=serializeObjectId(buffer,key,value,index,!0);else if(Buffer$6.isBuffer(value))index=serializeBuffer(buffer,key,value,index,!0);else if(value instanceof RegExp||isRegExp$1(value))index=serializeRegExp(buffer,key,value,index,!0);else if("object"===type&&null==value._bsontype)index=serializeObject(buffer,key,value,index,checkKeys,depth,serializeFunctions,ignoreUndefined,!0,path);else if("object"===type&&"Decimal128"===value._bsontype)index=serializeDecimal128(buffer,key,value,index,!0);else if("Long"===value._bsontype||"Timestamp"===value._bsontype)index=serializeLong(buffer,key,value,index,!0);else if("Double"===value._bsontype)index=serializeDouble(buffer,key,value,index,!0);else if("function"==typeof value&&serializeFunctions)index=serializeFunction(buffer,key,value,index,checkKeys,depth,serializeFunctions,!0);else if("Code"===value._bsontype)index=serializeCode(buffer,key,value,index,checkKeys,depth,serializeFunctions,ignoreUndefined,!0);else if("Binary"===value._bsontype)index=serializeBinary(buffer,key,value,index,!0);else if("Symbol"===value._bsontype)index=serializeSymbol(buffer,key,value,index,!0);else if("DBRef"===value._bsontype)index=serializeDBRef(buffer,key,value,index,depth,serializeFunctions,!0);else if("BSONRegExp"===value._bsontype)index=serializeBSONRegExp(buffer,key,value,index,!0);else if("Int32"===value._bsontype)index=serializeInt32(buffer,key,value,index,!0);else if("MinKey"===value._bsontype||"MaxKey"===value._bsontype)index=serializeMinMax(buffer,key,value,index,!0);else if(void 0!==value._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+value._bsontype)}else if(object instanceof map)for(var iterator=object.entries(),done=!1;!done;){var _type=iterator.next();if(!(done=_type.done)){var _key=_type.value[0],_value=_type.value[1],_type=_typeof$3(_value);if("string"==typeof _key&&!ignoreKeys.has(_key)){if(null!=_key.match(regexp$1))throw Error("key "+_key+" must not contain null bytes");if(checkKeys){if("$"===_key[0])throw Error("key "+_key+" must not start with '$'");if(~_key.indexOf("."))throw Error("key "+_key+" must not contain '.'")}}if("string"===_type)index=serializeString(buffer,_key,_value,index);else if("number"===_type)index=serializeNumber(buffer,_key,_value,index);else if("boolean"===_type)index=serializeBoolean(buffer,_key,_value,index);else if(_value instanceof Date||isDate$1(_value))index=serializeDate(buffer,_key,_value,index);else if(null===_value||void 0===_value&&!1===ignoreUndefined)index=serializeNull(buffer,_key,_value,index);else if("ObjectId"===_value._bsontype||"ObjectID"===_value._bsontype)index=serializeObjectId(buffer,_key,_value,index);else if(Buffer$6.isBuffer(_value))index=serializeBuffer(buffer,_key,_value,index);else if(_value instanceof RegExp||isRegExp$1(_value))index=serializeRegExp(buffer,_key,_value,index);else if("object"===_type&&null==_value._bsontype)index=serializeObject(buffer,_key,_value,index,checkKeys,depth,serializeFunctions,ignoreUndefined,!1,path);else if("object"===_type&&"Decimal128"===_value._bsontype)index=serializeDecimal128(buffer,_key,_value,index);else if("Long"===_value._bsontype||"Timestamp"===_value._bsontype)index=serializeLong(buffer,_key,_value,index);else if("Double"===_value._bsontype)index=serializeDouble(buffer,_key,_value,index);else if("Code"===_value._bsontype)index=serializeCode(buffer,_key,_value,index,checkKeys,depth,serializeFunctions,ignoreUndefined);else if("function"==typeof _value&&serializeFunctions)index=serializeFunction(buffer,_key,_value,index,checkKeys,depth,serializeFunctions);else if("Binary"===_value._bsontype)index=serializeBinary(buffer,_key,_value,index);else if("Symbol"===_value._bsontype)index=serializeSymbol(buffer,_key,_value,index);else if("DBRef"===_value._bsontype)index=serializeDBRef(buffer,_key,_value,index,depth,serializeFunctions);else if("BSONRegExp"===_value._bsontype)index=serializeBSONRegExp(buffer,_key,_value,index);else if("Int32"===_value._bsontype)index=serializeInt32(buffer,_key,_value,index);else if("MinKey"===_value._bsontype||"MaxKey"===_value._bsontype)index=serializeMinMax(buffer,_key,_value,index);else if(void 0!==_value._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+_value._bsontype)}}else{if(object.toBSON){if("function"!=typeof object.toBSON)throw new TypeError("toBSON is not a function");if(null!=(object=object.toBSON())&&"object"!==_typeof$3(object))throw new TypeError("toBSON function did not return an object")}for(var _key2 in object){var _value2=object[_key2];if(_value2&&_value2.toBSON){if("function"!=typeof _value2.toBSON)throw new TypeError("toBSON is not a function");_value2=_value2.toBSON()}var _type2=_typeof$3(_value2);if("string"==typeof _key2&&!ignoreKeys.has(_key2)){if(null!=_key2.match(regexp$1))throw Error("key "+_key2+" must not contain null bytes");if(checkKeys){if("$"===_key2[0])throw Error("key "+_key2+" must not start with '$'");if(~_key2.indexOf("."))throw Error("key "+_key2+" must not contain '.'")}}if("string"===_type2)index=serializeString(buffer,_key2,_value2,index);else if("number"===_type2)index=serializeNumber(buffer,_key2,_value2,index);else if("boolean"===_type2)index=serializeBoolean(buffer,_key2,_value2,index);else if(_value2 instanceof Date||isDate$1(_value2))index=serializeDate(buffer,_key2,_value2,index);else if(void 0===_value2)!1===ignoreUndefined&&(index=serializeNull(buffer,_key2,_value2,index));else if(null===_value2)index=serializeNull(buffer,_key2,_value2,index);else if("ObjectId"===_value2._bsontype||"ObjectID"===_value2._bsontype)index=serializeObjectId(buffer,_key2,_value2,index);else if(Buffer$6.isBuffer(_value2))index=serializeBuffer(buffer,_key2,_value2,index);else if(_value2 instanceof RegExp||isRegExp$1(_value2))index=serializeRegExp(buffer,_key2,_value2,index);else if("object"===_type2&&null==_value2._bsontype)index=serializeObject(buffer,_key2,_value2,index,checkKeys,depth,serializeFunctions,ignoreUndefined,!1,path);else if("object"===_type2&&"Decimal128"===_value2._bsontype)index=serializeDecimal128(buffer,_key2,_value2,index);else if("Long"===_value2._bsontype||"Timestamp"===_value2._bsontype)index=serializeLong(buffer,_key2,_value2,index);else if("Double"===_value2._bsontype)index=serializeDouble(buffer,_key2,_value2,index);else if("Code"===_value2._bsontype)index=serializeCode(buffer,_key2,_value2,index,checkKeys,depth,serializeFunctions,ignoreUndefined);else if("function"==typeof _value2&&serializeFunctions)index=serializeFunction(buffer,_key2,_value2,index,checkKeys,depth,serializeFunctions);else if("Binary"===_value2._bsontype)index=serializeBinary(buffer,_key2,_value2,index);else if("Symbol"===_value2._bsontype)index=serializeSymbol(buffer,_key2,_value2,index);else if("DBRef"===_value2._bsontype)index=serializeDBRef(buffer,_key2,_value2,index,depth,serializeFunctions);else if("BSONRegExp"===_value2._bsontype)index=serializeBSONRegExp(buffer,_key2,_value2,index);else if("Int32"===_value2._bsontype)index=serializeInt32(buffer,_key2,_value2,index);else if("MinKey"===_value2._bsontype||"MaxKey"===_value2._bsontype)index=serializeMinMax(buffer,_key2,_value2,index);else if(void 0!==_value2._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+_value2._bsontype)}}path.pop(),buffer[index++]=0;var size=index-startingIndex;return buffer[startingIndex++]=255&size,buffer[startingIndex++]=size>>8&255,buffer[startingIndex++]=size>>16&255,buffer[startingIndex++]=size>>24&255,index}var serializer=serializeInto;function _typeof$4(obj){return(_typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var Buffer$7=bufferEs6.Buffer,normalizedFunctionString$2=utils.normalizedFunctionString;function isDate$2(d){return"object"===_typeof$4(d)&&"[object Date]"===Object.prototype.toString.call(d)}function calculateObjectSize(object,serializeFunctions,ignoreUndefined){var totalLength=5;if(Array.isArray(object))for(var i=0;i<object.length;i++)totalLength+=calculateElement(i.toString(),object[i],serializeFunctions,!0,ignoreUndefined);else for(var key in object.toBSON&&(object=object.toBSON()),object)totalLength+=calculateElement(key,object[key],serializeFunctions,!1,ignoreUndefined);return totalLength}function calculateElement(name,value,serializeFunctions,isArray,ignoreUndefined){switch(value&&value.toBSON&&(value=value.toBSON()),_typeof$4(value)){case"string":return 1+Buffer$7.byteLength(name,"utf8")+1+4+Buffer$7.byteLength(value,"utf8")+1;case"number":return Math.floor(value)===value&&value>=constants.JS_INT_MIN&&value<=constants.JS_INT_MAX&&value>=constants.BSON_INT32_MIN&&value<=constants.BSON_INT32_MAX?(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+5:(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+9;case"undefined":return isArray||!ignoreUndefined?(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+1:0;case"boolean":return(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+2;case"object":if(null==value||"MinKey"===value._bsontype||"MaxKey"===value._bsontype)return(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+1;if("ObjectId"===value._bsontype||"ObjectID"===value._bsontype)return(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+13;if(value instanceof Date||isDate$2(value))return(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+9;if(void 0!==Buffer$7&&Buffer$7.isBuffer(value))return(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+6+value.length;if("Long"===value._bsontype||"Double"===value._bsontype||"Timestamp"===value._bsontype)return(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+9;if("Decimal128"===value._bsontype)return(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+17;if("Code"===value._bsontype)return null!=value.scope&&0<Object.keys(value.scope).length?(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+1+4+4+Buffer$7.byteLength(value.code.toString(),"utf8")+1+calculateObjectSize(value.scope,serializeFunctions,ignoreUndefined):(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+1+4+Buffer$7.byteLength(value.code.toString(),"utf8")+1;if("Binary"===value._bsontype)return value.sub_type===binary.SUBTYPE_BYTE_ARRAY?(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+(value.position+1+4+1+4):(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+(value.position+1+4+1);if("Symbol"===value._bsontype)return(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+Buffer$7.byteLength(value.value,"utf8")+4+1+1;if("DBRef"!==value._bsontype)return value instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(value)?(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+1+Buffer$7.byteLength(value.source,"utf8")+1+(value.global?1:0)+(value.ignoreCase?1:0)+(value.multiline?1:0)+1:"BSONRegExp"===value._bsontype?(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+1+Buffer$7.byteLength(value.pattern,"utf8")+1+Buffer$7.byteLength(value.options,"utf8")+1:(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+calculateObjectSize(value,serializeFunctions,ignoreUndefined)+1;var ordered_values=Object.assign({$ref:value.collection,$id:value.oid},value.fields);return null!=value.db&&(ordered_values.$db=value.db),(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+1+calculateObjectSize(ordered_values,serializeFunctions,ignoreUndefined);case"function":if(value instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(value)||"[object RegExp]"===String.call(value))return(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+1+Buffer$7.byteLength(value.source,"utf8")+1+(value.global?1:0)+(value.ignoreCase?1:0)+(value.multiline?1:0)+1;if(serializeFunctions&&null!=value.scope&&0<Object.keys(value.scope).length)return(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+1+4+4+Buffer$7.byteLength(normalizedFunctionString$2(value),"utf8")+1+calculateObjectSize(value.scope,serializeFunctions,ignoreUndefined);if(serializeFunctions)return(null!=name?Buffer$7.byteLength(name,"utf8")+1:0)+1+4+Buffer$7.byteLength(normalizedFunctionString$2(value),"utf8")+1}return 0}var calculate_size=calculateObjectSize,Buffer$8=bufferEs6.Buffer,ensure_buffer=function(potentialBuffer){if(potentialBuffer instanceof Buffer$8)return potentialBuffer;if(potentialBuffer instanceof Uint8Array)return Buffer$8.from(potentialBuffer.buffer);throw new TypeError("Must use either Buffer or Uint8Array")},Buffer$9=bufferEs6.Buffer,MAXSIZE=17825792,buffer=Buffer$9.alloc(MAXSIZE);function setInternalBufferSize(size){buffer.length<size&&(buffer=Buffer$9.alloc(size))}function serialize$1(object,minInternalBufferSize){var checkKeys="boolean"==typeof(minInternalBufferSize=minInternalBufferSize||{}).checkKeys&&minInternalBufferSize.checkKeys,serializeFunctions="boolean"==typeof minInternalBufferSize.serializeFunctions&&minInternalBufferSize.serializeFunctions,finishedBuffer="boolean"!=typeof minInternalBufferSize.ignoreUndefined||minInternalBufferSize.ignoreUndefined,minInternalBufferSize="number"==typeof minInternalBufferSize.minInternalBufferSize?minInternalBufferSize.minInternalBufferSize:MAXSIZE;buffer.length<minInternalBufferSize&&(buffer=Buffer$9.alloc(minInternalBufferSize));finishedBuffer=serializer(buffer,object,checkKeys,0,0,serializeFunctions,finishedBuffer,[]),finishedBuffer=Buffer$9.alloc(finishedBuffer);return buffer.copy(finishedBuffer,0,0,finishedBuffer.length),finishedBuffer}function serializeWithBufferAndIndex(object,finalBuffer,startIndex){var checkKeys="boolean"==typeof(startIndex=startIndex||{}).checkKeys&&startIndex.checkKeys,serializeFunctions="boolean"==typeof startIndex.serializeFunctions&&startIndex.serializeFunctions,serializationIndex="boolean"!=typeof startIndex.ignoreUndefined||startIndex.ignoreUndefined,startIndex="number"==typeof startIndex.index?startIndex.index:0,serializationIndex=serializer(buffer,object,checkKeys,0,0,serializeFunctions,serializationIndex);return buffer.copy(finalBuffer,startIndex,0,serializationIndex),startIndex+serializationIndex-1}function deserialize$2(buffer,options){return buffer=ensure_buffer(buffer),deserializer(buffer,options)}function calculateObjectSize$1(object,ignoreUndefined){var serializeFunctions="boolean"==typeof(ignoreUndefined=ignoreUndefined||{}).serializeFunctions&&ignoreUndefined.serializeFunctions,ignoreUndefined="boolean"!=typeof ignoreUndefined.ignoreUndefined||ignoreUndefined.ignoreUndefined;return calculate_size(object,serializeFunctions,ignoreUndefined)}function deserializeStream(data,startIndex,numberOfDocuments,documents,docStartIndex,options){options=Object.assign({allowObjectSmallerThanBufferSize:!0},options),data=ensure_buffer(data);for(var index=startIndex,i=0;i<numberOfDocuments;i++){var size=data[index]|data[index+1]<<8|data[index+2]<<16|data[index+3]<<24;options.index=index,documents[docStartIndex+i]=deserializer(data,options),index+=size}return index}var bson={BSON_INT32_MAX:constants.BSON_INT32_MAX,BSON_INT32_MIN:constants.BSON_INT32_MIN,BSON_INT64_MAX:constants.BSON_INT64_MAX,BSON_INT64_MIN:constants.BSON_INT64_MIN,JS_INT_MAX:constants.JS_INT_MAX,JS_INT_MIN:constants.JS_INT_MIN,BSON_DATA_NUMBER:constants.BSON_DATA_NUMBER,BSON_DATA_STRING:constants.BSON_DATA_STRING,BSON_DATA_OBJECT:constants.BSON_DATA_OBJECT,BSON_DATA_ARRAY:constants.BSON_DATA_ARRAY,BSON_DATA_BINARY:constants.BSON_DATA_BINARY,BSON_DATA_UNDEFINED:constants.BSON_DATA_UNDEFINED,BSON_DATA_OID:constants.BSON_DATA_OID,BSON_DATA_BOOLEAN:constants.BSON_DATA_BOOLEAN,BSON_DATA_DATE:constants.BSON_DATA_DATE,BSON_DATA_NULL:constants.BSON_DATA_NULL,BSON_DATA_REGEXP:constants.BSON_DATA_REGEXP,BSON_DATA_DBPOINTER:constants.BSON_DATA_DBPOINTER,BSON_DATA_CODE:constants.BSON_DATA_CODE,BSON_DATA_SYMBOL:constants.BSON_DATA_SYMBOL,BSON_DATA_CODE_W_SCOPE:constants.BSON_DATA_CODE_W_SCOPE,BSON_DATA_INT:constants.BSON_DATA_INT,BSON_DATA_TIMESTAMP:constants.BSON_DATA_TIMESTAMP,BSON_DATA_LONG:constants.BSON_DATA_LONG,BSON_DATA_DECIMAL128:constants.BSON_DATA_DECIMAL128,BSON_DATA_MIN_KEY:constants.BSON_DATA_MIN_KEY,BSON_DATA_MAX_KEY:constants.BSON_DATA_MAX_KEY,BSON_BINARY_SUBTYPE_DEFAULT:constants.BSON_BINARY_SUBTYPE_DEFAULT,BSON_BINARY_SUBTYPE_FUNCTION:constants.BSON_BINARY_SUBTYPE_FUNCTION,BSON_BINARY_SUBTYPE_BYTE_ARRAY:constants.BSON_BINARY_SUBTYPE_BYTE_ARRAY,BSON_BINARY_SUBTYPE_UUID:constants.BSON_BINARY_SUBTYPE_UUID,BSON_BINARY_SUBTYPE_MD5:constants.BSON_BINARY_SUBTYPE_MD5,BSON_BINARY_SUBTYPE_USER_DEFINED:constants.BSON_BINARY_SUBTYPE_USER_DEFINED,Code:code,Map:map,BSONSymbol:symbol,DBRef:db_ref,Binary:binary,ObjectId:objectid,Long:long_1$1,Timestamp:timestamp,Double:double_1,Int32:int_32,MinKey:min_key,MaxKey:max_key,BSONRegExp:regexp,Decimal128:decimal128,serialize:serialize$1,serializeWithBufferAndIndex:serializeWithBufferAndIndex,deserialize:deserialize$2,calculateObjectSize:calculateObjectSize$1,deserializeStream:deserializeStream,setInternalBufferSize:setInternalBufferSize,ObjectID:objectid,EJSON:extended_json},bson_1=bson.BSON_INT32_MAX,bson_2=bson.BSON_INT32_MIN,bson_3=bson.BSON_INT64_MAX,bson_4=bson.BSON_INT64_MIN,bson_5=bson.JS_INT_MAX,bson_6=bson.JS_INT_MIN,bson_7=bson.BSON_DATA_NUMBER,bson_8=bson.BSON_DATA_STRING,bson_9=bson.BSON_DATA_OBJECT,bson_10=bson.BSON_DATA_ARRAY,bson_11=bson.BSON_DATA_BINARY,bson_12=bson.BSON_DATA_UNDEFINED,bson_13=bson.BSON_DATA_OID,bson_14=bson.BSON_DATA_BOOLEAN,bson_15=bson.BSON_DATA_DATE,bson_16=bson.BSON_DATA_NULL,bson_17=bson.BSON_DATA_REGEXP,bson_18=bson.BSON_DATA_DBPOINTER,bson_19=bson.BSON_DATA_CODE,bson_20=bson.BSON_DATA_SYMBOL,bson_21=bson.BSON_DATA_CODE_W_SCOPE,bson_22=bson.BSON_DATA_INT,bson_23=bson.BSON_DATA_TIMESTAMP,bson_24=bson.BSON_DATA_LONG,bson_25=bson.BSON_DATA_DECIMAL128,bson_26=bson.BSON_DATA_MIN_KEY,bson_27=bson.BSON_DATA_MAX_KEY,bson_28=bson.BSON_BINARY_SUBTYPE_DEFAULT,bson_29=bson.BSON_BINARY_SUBTYPE_FUNCTION,bson_30=bson.BSON_BINARY_SUBTYPE_BYTE_ARRAY,bson_31=bson.BSON_BINARY_SUBTYPE_UUID,bson_32=bson.BSON_BINARY_SUBTYPE_MD5,bson_33=bson.BSON_BINARY_SUBTYPE_USER_DEFINED,bson_34=bson.Code,bson_35=bson.BSONSymbol,bson_36=bson.DBRef,bson_37=bson.Binary,bson_38=bson.ObjectId,bson_39=bson.Long,bson_40=bson.Timestamp,bson_41=bson.Double,bson_42=bson.Int32,bson_43=bson.MinKey,bson_44=bson.MaxKey,bson_45=bson.BSONRegExp,bson_46=bson.Decimal128,bson_47=bson.serialize,bson_48=bson.serializeWithBufferAndIndex,bson_49=bson.deserialize,bson_50=bson.calculateObjectSize,bson_51=bson.deserializeStream,bson_52=bson.setInternalBufferSize,bson_53=bson.ObjectID,bson_54=bson.EJSON;return exports.default=bson,exports.BSON_INT32_MAX=bson_1,exports.BSON_INT32_MIN=bson_2,exports.BSON_INT64_MAX=bson_3,exports.BSON_INT64_MIN=bson_4,exports.JS_INT_MAX=bson_5,exports.JS_INT_MIN=bson_6,exports.BSON_DATA_NUMBER=bson_7,exports.BSON_DATA_STRING=bson_8,exports.BSON_DATA_OBJECT=bson_9,exports.BSON_DATA_ARRAY=bson_10,exports.BSON_DATA_BINARY=bson_11,exports.BSON_DATA_UNDEFINED=bson_12,exports.BSON_DATA_OID=bson_13,exports.BSON_DATA_BOOLEAN=bson_14,exports.BSON_DATA_DATE=bson_15,exports.BSON_DATA_NULL=bson_16,exports.BSON_DATA_REGEXP=bson_17,exports.BSON_DATA_DBPOINTER=bson_18,exports.BSON_DATA_CODE=bson_19,exports.BSON_DATA_SYMBOL=bson_20,exports.BSON_DATA_CODE_W_SCOPE=bson_21,exports.BSON_DATA_INT=bson_22,exports.BSON_DATA_TIMESTAMP=bson_23,exports.BSON_DATA_LONG=bson_24,exports.BSON_DATA_DECIMAL128=bson_25,exports.BSON_DATA_MIN_KEY=bson_26,exports.BSON_DATA_MAX_KEY=bson_27,exports.BSON_BINARY_SUBTYPE_DEFAULT=bson_28,exports.BSON_BINARY_SUBTYPE_FUNCTION=bson_29,exports.BSON_BINARY_SUBTYPE_BYTE_ARRAY=bson_30,exports.BSON_BINARY_SUBTYPE_UUID=bson_31,exports.BSON_BINARY_SUBTYPE_MD5=bson_32,exports.BSON_BINARY_SUBTYPE_USER_DEFINED=bson_33,exports.Code=bson_34,exports.BSONSymbol=bson_35,exports.DBRef=bson_36,exports.Binary=bson_37,exports.ObjectId=bson_38,exports.Long=bson_39,exports.Timestamp=bson_40,exports.Double=bson_41,exports.Int32=bson_42,exports.MinKey=bson_43,exports.MaxKey=bson_44,exports.BSONRegExp=bson_45,exports.Decimal128=bson_46,exports.serialize=bson_47,exports.serializeWithBufferAndIndex=bson_48,exports.deserialize=bson_49,exports.calculateObjectSize=bson_50,exports.deserializeStream=bson_51,exports.setInternalBufferSize=bson_52,exports.ObjectID=bson_53,exports.EJSON=bson_54,exports}({});